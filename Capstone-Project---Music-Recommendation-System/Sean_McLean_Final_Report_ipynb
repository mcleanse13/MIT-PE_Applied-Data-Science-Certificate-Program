{"cells":[{"cell_type":"markdown","metadata":{"id":"XCugbF2qXtDg"},"source":["**Music Recommendation System - Sean McLean**\n","\n","**Final Submission - Music Recommendation Systems**\n","\n","**Executive Summary**\n","\n","*   What are the key takeaways?\n","*   What are the key next steps?\n","\n","**Problem and Solution Summary**\n","\n","*   What problem was being solved?\n","*   What are the key points that describe the final proposed solution design?\n","*   Why is this a 'valid' solution that is likely to solve the problem?\n","\n","**Recommendations for Implementation**\n","\n","*   What are some key recommendations to implement the solutions?\n","*   What are the key actionables for stakeholders?\n","*   What is the expected benefit and/or costs? What are the key risks and challenges?\n","*   What further analysis needs to be done or what other associated problems need to be solved?\n","\n","**Milestone 1**\n","\n","\n","**Data Dictionary**\n","\n","The core data is the Taste Profile Subset released by the Echo Nest as part of the Million Song Dataset. There are two files in this dataset. The first file contains the details about the song id, titles, release, artist name, and the year of release. The second file contains the user id, song id, and the play count of users.\n","\n","song_data\n","\n","song_id - A unique id given to every song\n","\n","title - Title of the song\n","\n","Release - Name of the released album\n","\n","Artist_name - Name of the artist\n","\n","year - Year of release\n","\n","count_data\n","\n","user _id - A unique id given to the user\n","\n","song_id - A unique id given to the song\n","\n","play_count - Number of times the song was played\n","\n","Data Source\n","\n","http://millionsongdataset.com/\n","\n","**Important Notes**\n","\n","*   This notebook can be considered a guide to refer to while solving the problem. The evaluation will be as per the Rubric shared for each Milestone. Unlike previous courses, it does not follow the pattern of the graded questions in different sections. This notebook would give you a direction on what steps need to be taken to get a feasible solution to the problem. Please note that this is just one way of doing this. There can be other 'creative' ways to solve the problem, and we encourage you to feel free and explore them as an 'optional' exercise.\n","*   In the notebook, there are markdown cells called Observations and Insights. It is a good practice to provide observations and extract insights from the outputs.\n","*   The naming convention for different variables can vary. Please consider the code provided in this notebook as a sample code.\n","*   All the outputs in the notebook are just for reference and can be different if you follow a different approach.\n","*   There are sections called Think About It in the notebook that will help you get a better understanding of the reasoning behind a particular technique/step. Interested learners can take alternative approaches if they want to explore different techniques.\n","\n","**Importing Libraries and the Dataset**"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"NMtJfIPpYG1E","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156053543,"user_tz":300,"elapsed":1241,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"2e16e062-7544-46f6-9b9b-807cbf73d052"},"outputs":[{"output_type":"stream","name":"stdout","text":["Drive already mounted at /content/drive; to attempt to forcibly remount, call drive.mount(\"/content/drive\", force_remount=True).\n"]}],"source":["from google.colab import drive\n","drive.mount('/content/drive')"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Jcy0bFb4YRkl"},"outputs":[],"source":["import warnings\n","warnings.filterwarnings('ignore')\n","\n","import numpy as np\n","import pandas as pd\n","\n","import matplotlib.pyplot as plt\n","\n","import seaborn as sns\n","\n","from sklearn.metrics.pairwise import cosine_similarity\n","\n","from collections import defaultdict\n","\n","from sklearn.metrics import mean_squared_error"]},{"cell_type":"markdown","metadata":{"id":"ww9JPZOwYWI9"},"source":["**Load the dataset**"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"zU5cYXgqYiVS"},"outputs":[],"source":["count_df = pd.read_csv('/content/drive/MyDrive/count_data.csv')\n","song_df = pd.read_csv('/content/drive/MyDrive/song_data.csv')"]},{"cell_type":"markdown","metadata":{"id":"ZoynEiX1YriJ"},"source":["**Understanding the data by viewing a few observations**"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"vWySzHX7YvMc","colab":{"base_uri":"https://localhost:8080/","height":363},"executionInfo":{"status":"ok","timestamp":1671156060258,"user_tz":300,"elapsed":8,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"37b55ff6-eb21-4754-e544-f143c79c81d4"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["   Unnamed: 0                                   user_id             song_id  \\\n","0           0  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SOAKIMP12A8C130995   \n","1           1  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SOBBMDR12A8C13253B   \n","2           2  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SOBXHDL12A81C204C0   \n","3           3  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SOBYHAJ12A6701BF1D   \n","4           4  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SODACBL12A8C13C273   \n","5           5  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SODDNQT12A6D4F5F7E   \n","6           6  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SODXRTY12AB0180F3B   \n","7           7  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SOFGUAY12AB017B0A8   \n","8           8  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SOFRQTD12A81C233C0   \n","9           9  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SOHQWYZ12A6D4FA701   \n","\n","   play_count  \n","0           1  \n","1           2  \n","2           1  \n","3           1  \n","4           1  \n","5           5  \n","6           1  \n","7           1  \n","8           1  \n","9           1  "],"text/html":["\n","  <div id=\"df-b429e826-799b-4a17-83e3-4e289b47e822\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>Unnamed: 0</th>\n","      <th>user_id</th>\n","      <th>song_id</th>\n","      <th>play_count</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>0</td>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SOAKIMP12A8C130995</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>1</td>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SOBBMDR12A8C13253B</td>\n","      <td>2</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>2</td>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SOBXHDL12A81C204C0</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>3</td>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SOBYHAJ12A6701BF1D</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>4</td>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SODACBL12A8C13C273</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>5</th>\n","      <td>5</td>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SODDNQT12A6D4F5F7E</td>\n","      <td>5</td>\n","    </tr>\n","    <tr>\n","      <th>6</th>\n","      <td>6</td>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SODXRTY12AB0180F3B</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>7</th>\n","      <td>7</td>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SOFGUAY12AB017B0A8</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>8</th>\n","      <td>8</td>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SOFRQTD12A81C233C0</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>9</th>\n","      <td>9</td>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SOHQWYZ12A6D4FA701</td>\n","      <td>1</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-b429e826-799b-4a17-83e3-4e289b47e822')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-b429e826-799b-4a17-83e3-4e289b47e822 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-b429e826-799b-4a17-83e3-4e289b47e822');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":4}],"source":["count_df.head(10)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Xu6vI7l3Yys0","colab":{"base_uri":"https://localhost:8080/","height":459},"executionInfo":{"status":"ok","timestamp":1671156060258,"user_tz":300,"elapsed":6,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"2a84df59-e8e8-4983-ef2b-b0aabe7392e6"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["              song_id                                              title  \\\n","0  SOQMMHC12AB0180CB8                                       Silent Night   \n","1  SOVFVAK12A8C1350D9                                        Tanssi vaan   \n","2  SOGTUKN12AB017F4F1                                  No One Could Ever   \n","3  SOBNYVR12A8C13558C                                      Si Vos Querés   \n","4  SOHSBXH12A8C13B0DF                                   Tangle Of Aspens   \n","5  SOZVAPQ12A8C13B63C  Symphony No. 1 G minor \"Sinfonie Serieuse\"/All...   \n","6  SOQVRHI12A6D4FB2D7                                   We Have Got Love   \n","7  SOEYRFT12AB018936C                                  2 Da Beat Ch'yall   \n","8  SOPMIYT12A6D4F851E                                            Goodbye   \n","9  SOJCFMH12A8C13B0C2                         Mama_ mama can't you see ?   \n","\n","                                release  \\\n","0                 Monster Ballads X-Mas   \n","1                           Karkuteillä   \n","2                                Butter   \n","3                               De Culo   \n","4  Rene Ablaze Presents Winter Sessions   \n","5      Berwald: Symphonies Nos. 1/2/3/4   \n","6             Strictly The Best Vol. 34   \n","7                               Da Bomb   \n","8                             Danny Boy   \n","9  March to cadence with the US marines   \n","\n","                                      artist_name  year  \n","0                                Faster Pussy cat  2003  \n","1                                Karkkiautomaatti  1995  \n","2                                  Hudson Mohawke  2006  \n","3                                     Yerba Brava  2003  \n","4                                      Der Mystic     0  \n","5                                David Montgomery     0  \n","6                              Sasha / Turbulence     0  \n","7                                      Kris Kross  1993  \n","8                                    Joseph Locke     0  \n","9  The Sun Harbor's Chorus-Documentary Recordings     0  "],"text/html":["\n","  <div id=\"df-2d131fd3-6cba-4e7c-b92b-0d67ff8b4e7c\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>song_id</th>\n","      <th>title</th>\n","      <th>release</th>\n","      <th>artist_name</th>\n","      <th>year</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>SOQMMHC12AB0180CB8</td>\n","      <td>Silent Night</td>\n","      <td>Monster Ballads X-Mas</td>\n","      <td>Faster Pussy cat</td>\n","      <td>2003</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>SOVFVAK12A8C1350D9</td>\n","      <td>Tanssi vaan</td>\n","      <td>Karkuteillä</td>\n","      <td>Karkkiautomaatti</td>\n","      <td>1995</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>SOGTUKN12AB017F4F1</td>\n","      <td>No One Could Ever</td>\n","      <td>Butter</td>\n","      <td>Hudson Mohawke</td>\n","      <td>2006</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>SOBNYVR12A8C13558C</td>\n","      <td>Si Vos Querés</td>\n","      <td>De Culo</td>\n","      <td>Yerba Brava</td>\n","      <td>2003</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>SOHSBXH12A8C13B0DF</td>\n","      <td>Tangle Of Aspens</td>\n","      <td>Rene Ablaze Presents Winter Sessions</td>\n","      <td>Der Mystic</td>\n","      <td>0</td>\n","    </tr>\n","    <tr>\n","      <th>5</th>\n","      <td>SOZVAPQ12A8C13B63C</td>\n","      <td>Symphony No. 1 G minor \"Sinfonie Serieuse\"/All...</td>\n","      <td>Berwald: Symphonies Nos. 1/2/3/4</td>\n","      <td>David Montgomery</td>\n","      <td>0</td>\n","    </tr>\n","    <tr>\n","      <th>6</th>\n","      <td>SOQVRHI12A6D4FB2D7</td>\n","      <td>We Have Got Love</td>\n","      <td>Strictly The Best Vol. 34</td>\n","      <td>Sasha / Turbulence</td>\n","      <td>0</td>\n","    </tr>\n","    <tr>\n","      <th>7</th>\n","      <td>SOEYRFT12AB018936C</td>\n","      <td>2 Da Beat Ch'yall</td>\n","      <td>Da Bomb</td>\n","      <td>Kris Kross</td>\n","      <td>1993</td>\n","    </tr>\n","    <tr>\n","      <th>8</th>\n","      <td>SOPMIYT12A6D4F851E</td>\n","      <td>Goodbye</td>\n","      <td>Danny Boy</td>\n","      <td>Joseph Locke</td>\n","      <td>0</td>\n","    </tr>\n","    <tr>\n","      <th>9</th>\n","      <td>SOJCFMH12A8C13B0C2</td>\n","      <td>Mama_ mama can't you see ?</td>\n","      <td>March to cadence with the US marines</td>\n","      <td>The Sun Harbor's Chorus-Documentary Recordings</td>\n","      <td>0</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-2d131fd3-6cba-4e7c-b92b-0d67ff8b4e7c')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-2d131fd3-6cba-4e7c-b92b-0d67ff8b4e7c button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-2d131fd3-6cba-4e7c-b92b-0d67ff8b4e7c');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":5}],"source":["song_df.head(10)"]},{"cell_type":"markdown","metadata":{"id":"zSQizZhYY51B"},"source":["**Let us check the data types and and missing values of each column**"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"vB9ojk8FY-Yj","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156060677,"user_tz":300,"elapsed":235,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"dceb2cf7-8aea-4fdf-8e17-d42e668119a1"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["76353"]},"metadata":{},"execution_count":6}],"source":["count_df['user_id'].nunique()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"RgcDKSJQZCwN","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156060912,"user_tz":300,"elapsed":237,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"25e1086b-2524-424d-9888-74c5d402da01"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["999056"]},"metadata":{},"execution_count":7}],"source":["song_df['song_id'].nunique()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"8czR8yZ4ZH7o","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156061289,"user_tz":300,"elapsed":379,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"5eb754df-3c4a-40bb-dd6d-88f19db5299b"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["10000"]},"metadata":{},"execution_count":8}],"source":["count_df['song_id'].nunique()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"kB2-egKWZKrV","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156061289,"user_tz":300,"elapsed":5,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"69a5095b-77b3-4f32-f95c-754f380a37f9"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["295"]},"metadata":{},"execution_count":9}],"source":["count_df['play_count'].nunique()"]},{"cell_type":"code","source":["song_df['release'].nunique()"],"metadata":{"id":"lhHe2VC-NqNK","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156061723,"user_tz":300,"elapsed":436,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"afa0a0f1-f297-4a06-de69-59a4ea7ad116"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["149288"]},"metadata":{},"execution_count":10}]},{"cell_type":"code","source":["song_df['year'].nunique()"],"metadata":{"id":"h89EmEp5NrtJ","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156061723,"user_tz":300,"elapsed":5,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"68d7e42d-900a-43dd-cb08-3483a274e254"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["90"]},"metadata":{},"execution_count":11}]},{"cell_type":"code","source":["song_df['artist_name'].nunique()"],"metadata":{"id":"VOO4-s-YNxVF","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156062056,"user_tz":300,"elapsed":335,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"2dc78bdb-e5d3-4e6e-d179-79975e611408"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["72665"]},"metadata":{},"execution_count":12}]},{"cell_type":"code","execution_count":null,"metadata":{"id":"apwITdM5ZNhP","colab":{"base_uri":"https://localhost:8080/","height":300},"executionInfo":{"status":"ok","timestamp":1671156062057,"user_tz":300,"elapsed":5,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"737693c2-6add-467c-c943-1a14a70d2b7d"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["                 year\n","count  1000000.000000\n","mean      1030.325652\n","std        998.745002\n","min          0.000000\n","25%          0.000000\n","50%       1969.000000\n","75%       2002.000000\n","max       2011.000000"],"text/html":["\n","  <div id=\"df-33da758e-ac7c-402a-b281-38748a66ee18\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>year</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>count</th>\n","      <td>1000000.000000</td>\n","    </tr>\n","    <tr>\n","      <th>mean</th>\n","      <td>1030.325652</td>\n","    </tr>\n","    <tr>\n","      <th>std</th>\n","      <td>998.745002</td>\n","    </tr>\n","    <tr>\n","      <th>min</th>\n","      <td>0.000000</td>\n","    </tr>\n","    <tr>\n","      <th>25%</th>\n","      <td>0.000000</td>\n","    </tr>\n","    <tr>\n","      <th>50%</th>\n","      <td>1969.000000</td>\n","    </tr>\n","    <tr>\n","      <th>75%</th>\n","      <td>2002.000000</td>\n","    </tr>\n","    <tr>\n","      <th>max</th>\n","      <td>2011.000000</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-33da758e-ac7c-402a-b281-38748a66ee18')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-33da758e-ac7c-402a-b281-38748a66ee18 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-33da758e-ac7c-402a-b281-38748a66ee18');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":13}],"source":["song_df.describe()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"GnlyFxCgZSb2","colab":{"base_uri":"https://localhost:8080/","height":300},"executionInfo":{"status":"ok","timestamp":1671156062351,"user_tz":300,"elapsed":298,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"dde27bc9-368d-4501-a700-3108277bdb89"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["         Unnamed: 0    play_count\n","count  2.000000e+06  2.000000e+06\n","mean   9.999995e+05  3.045485e+00\n","std    5.773504e+05  6.579720e+00\n","min    0.000000e+00  1.000000e+00\n","25%    4.999998e+05  1.000000e+00\n","50%    9.999995e+05  1.000000e+00\n","75%    1.499999e+06  3.000000e+00\n","max    1.999999e+06  2.213000e+03"],"text/html":["\n","  <div id=\"df-795f43c2-c327-43d0-a3db-534d1d6c4553\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>Unnamed: 0</th>\n","      <th>play_count</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>count</th>\n","      <td>2.000000e+06</td>\n","      <td>2.000000e+06</td>\n","    </tr>\n","    <tr>\n","      <th>mean</th>\n","      <td>9.999995e+05</td>\n","      <td>3.045485e+00</td>\n","    </tr>\n","    <tr>\n","      <th>std</th>\n","      <td>5.773504e+05</td>\n","      <td>6.579720e+00</td>\n","    </tr>\n","    <tr>\n","      <th>min</th>\n","      <td>0.000000e+00</td>\n","      <td>1.000000e+00</td>\n","    </tr>\n","    <tr>\n","      <th>25%</th>\n","      <td>4.999998e+05</td>\n","      <td>1.000000e+00</td>\n","    </tr>\n","    <tr>\n","      <th>50%</th>\n","      <td>9.999995e+05</td>\n","      <td>1.000000e+00</td>\n","    </tr>\n","    <tr>\n","      <th>75%</th>\n","      <td>1.499999e+06</td>\n","      <td>3.000000e+00</td>\n","    </tr>\n","    <tr>\n","      <th>max</th>\n","      <td>1.999999e+06</td>\n","      <td>2.213000e+03</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-795f43c2-c327-43d0-a3db-534d1d6c4553')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-795f43c2-c327-43d0-a3db-534d1d6c4553 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-795f43c2-c327-43d0-a3db-534d1d6c4553');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":14}],"source":["count_df.describe()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"dyhjbItgZVpX","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156062552,"user_tz":300,"elapsed":205,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"44053633-3feb-41eb-fe9c-f211f41350fd"},"outputs":[{"output_type":"stream","name":"stdout","text":["<class 'pandas.core.frame.DataFrame'>\n","RangeIndex: 1000000 entries, 0 to 999999\n","Data columns (total 5 columns):\n"," #   Column       Non-Null Count    Dtype \n","---  ------       --------------    ----- \n"," 0   song_id      1000000 non-null  object\n"," 1   title        999985 non-null   object\n"," 2   release      999995 non-null   object\n"," 3   artist_name  1000000 non-null  object\n"," 4   year         1000000 non-null  int64 \n","dtypes: int64(1), object(4)\n","memory usage: 38.1+ MB\n"]}],"source":["song_df.info()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"OmTl7yXIZYnc","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156062755,"user_tz":300,"elapsed":9,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"16980c91-269b-401c-bb73-fc4372e02185"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["song_id         0\n","title          15\n","release         5\n","artist_name     0\n","year            0\n","dtype: int64"]},"metadata":{},"execution_count":16}],"source":["song_df.isnull().sum()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"oDr-wHU5Zc7q","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156062755,"user_tz":300,"elapsed":6,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"3ded1c26-e2ff-4e94-d23e-39df288c06e4"},"outputs":[{"output_type":"stream","name":"stdout","text":["<class 'pandas.core.frame.DataFrame'>\n","RangeIndex: 2000000 entries, 0 to 1999999\n","Data columns (total 4 columns):\n"," #   Column      Dtype \n","---  ------      ----- \n"," 0   Unnamed: 0  int64 \n"," 1   user_id     object\n"," 2   song_id     object\n"," 3   play_count  int64 \n","dtypes: int64(2), object(2)\n","memory usage: 61.0+ MB\n"]}],"source":["count_df.info()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"1sFVxz_tZg0S","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156063175,"user_tz":300,"elapsed":424,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"1e0af7b4-3fe3-458f-b796-a8fe1d4bdfe8"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["Unnamed: 0    0\n","user_id       0\n","song_id       0\n","play_count    0\n","dtype: int64"]},"metadata":{},"execution_count":18}],"source":["count_df.isnull().sum()"]},{"cell_type":"markdown","metadata":{"id":"uGiGG4l0a3mF"},"source":["**Observations and Insights:**\n","\n","*   Overall there are 1,000,000 songs in the file and 2,000,000 interactions in the count file. In the song file there are a total 20 of missing values with 15 coming from the song titles column and the other 5 that derive from the album release column. Most of the data types in the two files are objective with the other few being integer data types, including how many times a song was played.\n","*   One thing I noticed is that from the first 10 records in the song file is that there are several 0's under the year column, even though they are zero missing values when looking at the data types. This could possibly impact the users recommendations if the time period is a key aspect of what a user listens to. For example, if a user listens to a lot of music from the 1970's, the best recommendations from that era may not be provided to the user because that information is missing.\n","*   From the count file there doesn't seem to be anything that stands out like missing values.\n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"DJ1Y6HQVbZ0I"},"outputs":[],"source":["df = pd.merge(count_df, song_df.drop_duplicates(['song_id']), on=\"song_id\", how=\"left\")"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"ZJGnFvRQbdWH"},"outputs":[],"source":["df.drop(['Unnamed: 0'], axis=1, inplace=True)"]},{"cell_type":"code","source":["df.info()"],"metadata":{"id":"DG51eiG7OIxJ","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156066425,"user_tz":300,"elapsed":11,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"5b9cb260-7dd4-4056-e090-069bafe5c8f7"},"execution_count":null,"outputs":[{"output_type":"stream","name":"stdout","text":["<class 'pandas.core.frame.DataFrame'>\n","Int64Index: 2000000 entries, 0 to 1999999\n","Data columns (total 7 columns):\n"," #   Column       Dtype \n","---  ------       ----- \n"," 0   user_id      object\n"," 1   song_id      object\n"," 2   play_count   int64 \n"," 3   title        object\n"," 4   release      object\n"," 5   artist_name  object\n"," 6   year         int64 \n","dtypes: int64(2), object(5)\n","memory usage: 122.1+ MB\n"]}]},{"cell_type":"code","source":["df.head()"],"metadata":{"id":"h_adDkLzOeW0","colab":{"base_uri":"https://localhost:8080/","height":206},"executionInfo":{"status":"ok","timestamp":1671156066426,"user_tz":300,"elapsed":6,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"601b6181-091f-437e-b14c-a752173b0143"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["                                    user_id             song_id  play_count  \\\n","0  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SOAKIMP12A8C130995           1   \n","1  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SOBBMDR12A8C13253B           2   \n","2  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SOBXHDL12A81C204C0           1   \n","3  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SOBYHAJ12A6701BF1D           1   \n","4  b80344d063b5ccb3212f76538f3d9e43d87dca9e  SODACBL12A8C13C273           1   \n","\n","             title                        release    artist_name  year  \n","0         The Cove             Thicker Than Water   Jack Johnson     0  \n","1  Entre Dos Aguas            Flamenco Para Niños  Paco De Lucia  1976  \n","2         Stronger                     Graduation     Kanye West  2007  \n","3   Constellations              In Between Dreams   Jack Johnson  2005  \n","4     Learn To Fly  There Is Nothing Left To Lose   Foo Fighters  1999  "],"text/html":["\n","  <div id=\"df-f88a2a43-e3b9-4f25-b080-1539ce11c067\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>user_id</th>\n","      <th>song_id</th>\n","      <th>play_count</th>\n","      <th>title</th>\n","      <th>release</th>\n","      <th>artist_name</th>\n","      <th>year</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SOAKIMP12A8C130995</td>\n","      <td>1</td>\n","      <td>The Cove</td>\n","      <td>Thicker Than Water</td>\n","      <td>Jack Johnson</td>\n","      <td>0</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SOBBMDR12A8C13253B</td>\n","      <td>2</td>\n","      <td>Entre Dos Aguas</td>\n","      <td>Flamenco Para Niños</td>\n","      <td>Paco De Lucia</td>\n","      <td>1976</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SOBXHDL12A81C204C0</td>\n","      <td>1</td>\n","      <td>Stronger</td>\n","      <td>Graduation</td>\n","      <td>Kanye West</td>\n","      <td>2007</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SOBYHAJ12A6701BF1D</td>\n","      <td>1</td>\n","      <td>Constellations</td>\n","      <td>In Between Dreams</td>\n","      <td>Jack Johnson</td>\n","      <td>2005</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>b80344d063b5ccb3212f76538f3d9e43d87dca9e</td>\n","      <td>SODACBL12A8C13C273</td>\n","      <td>1</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-f88a2a43-e3b9-4f25-b080-1539ce11c067')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-f88a2a43-e3b9-4f25-b080-1539ce11c067 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-f88a2a43-e3b9-4f25-b080-1539ce11c067');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":22}]},{"cell_type":"code","source":["df['song_id'].nunique()"],"metadata":{"id":"6G8aILoxQDli","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156066598,"user_tz":300,"elapsed":177,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"41a61fdf-0b58-45e9-8d86-0123f73606b1"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["10000"]},"metadata":{},"execution_count":23}]},{"cell_type":"code","source":["df['user_id'].nunique()"],"metadata":{"id":"4VYfwb55QH-P","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156066960,"user_tz":300,"elapsed":363,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"163722a8-5bce-4ed7-a446-851cb8531667"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["76353"]},"metadata":{},"execution_count":24}]},{"cell_type":"code","source":["df['artist_name'].nunique()"],"metadata":{"id":"UFUMqHX98eMr","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156067269,"user_tz":300,"elapsed":177,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"93f26025-c46e-4e7c-be53-b7b295d67d25"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["3375"]},"metadata":{},"execution_count":25}]},{"cell_type":"markdown","metadata":{"id":"TYUvOtLDbilj"},"source":["\n","**Think About It:** As the user_id and song_id are encrypted. Can they be encoded to numeric features?\n","\n","*   Encrypting the user_id and song_id columns in the files I believe can be encoded to numeric features and would be easier to visualize. Their original objective data type has each entry as being a large group of numbers and letters, so encoding them to just being a numeric feature will be easier to understand for future visualization and programming."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"-JGWcIRnbyED","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156070868,"user_tz":300,"elapsed":3601,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"9a6e2c32-adfb-4196-f884-7f9badac493b"},"outputs":[{"output_type":"stream","name":"stdout","text":["Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Requirement already satisfied: scipy in /usr/local/lib/python3.8/dist-packages (1.7.3)\n","Requirement already satisfied: numpy<1.23.0,>=1.16.5 in /usr/local/lib/python3.8/dist-packages (from scipy) (1.21.6)\n"]}],"source":["!pip install scipy"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"ls_8gOUFb18k"},"outputs":[],"source":["from pandas.core.arrays.interval import le\n","from sklearn.preprocessing import LabelEncoder\n","from sklearn.metrics.pairwise import cosine_similarity\n","\n","le = LabelEncoder()\n","\n","df['user_id'] = le.fit_transform(df['user_id'])\n","\n","df['song_id'] = le.fit_transform(df['song_id'])"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"I8FhWhvwb5ce","colab":{"base_uri":"https://localhost:8080/","height":206},"executionInfo":{"status":"ok","timestamp":1671156072488,"user_tz":300,"elapsed":5,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"56897850-b597-4399-cf4b-35717c192839"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["   user_id  song_id  play_count            title  \\\n","0    54961      153           1         The Cove   \n","1    54961      413           2  Entre Dos Aguas   \n","2    54961      736           1         Stronger   \n","3    54961      750           1   Constellations   \n","4    54961     1188           1     Learn To Fly   \n","\n","                         release    artist_name  year  \n","0             Thicker Than Water   Jack Johnson     0  \n","1            Flamenco Para Niños  Paco De Lucia  1976  \n","2                     Graduation     Kanye West  2007  \n","3              In Between Dreams   Jack Johnson  2005  \n","4  There Is Nothing Left To Lose   Foo Fighters  1999  "],"text/html":["\n","  <div id=\"df-a94df520-473d-4b3e-a87b-ae455e682eed\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>user_id</th>\n","      <th>song_id</th>\n","      <th>play_count</th>\n","      <th>title</th>\n","      <th>release</th>\n","      <th>artist_name</th>\n","      <th>year</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>54961</td>\n","      <td>153</td>\n","      <td>1</td>\n","      <td>The Cove</td>\n","      <td>Thicker Than Water</td>\n","      <td>Jack Johnson</td>\n","      <td>0</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>54961</td>\n","      <td>413</td>\n","      <td>2</td>\n","      <td>Entre Dos Aguas</td>\n","      <td>Flamenco Para Niños</td>\n","      <td>Paco De Lucia</td>\n","      <td>1976</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>54961</td>\n","      <td>736</td>\n","      <td>1</td>\n","      <td>Stronger</td>\n","      <td>Graduation</td>\n","      <td>Kanye West</td>\n","      <td>2007</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>54961</td>\n","      <td>750</td>\n","      <td>1</td>\n","      <td>Constellations</td>\n","      <td>In Between Dreams</td>\n","      <td>Jack Johnson</td>\n","      <td>2005</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>54961</td>\n","      <td>1188</td>\n","      <td>1</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-a94df520-473d-4b3e-a87b-ae455e682eed')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-a94df520-473d-4b3e-a87b-ae455e682eed button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-a94df520-473d-4b3e-a87b-ae455e682eed');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":28}],"source":["df.head()"]},{"cell_type":"markdown","metadata":{"id":"wS1M6Eb2b-hp"},"source":["**Think About It:** As the data also contains users who have listened to very few songs and vice versa, is it required to filter the data so that it contains users who have listened to a good count of songs and vice versa?\n","\n","*   I think collectively it makes sense to include both types of users in terms of how many songs they have listened to. Regardless of how many listens a user has I think there is enough information there to include both types of users where a reliable recommendation system can be built. I think even if a user has only listened to a small amount of songs that there could still be some commonalities between the listened songs where a recommendation system can be built and wouldn't be too much different from a user who has listened to a lot of songs. Despite this, more listens would create a better recommendation system with the amount of data to use."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"7eoPMFqZcD4N"},"outputs":[],"source":["users = df.user_id\n","\n","ratings_count = dict()\n","\n","for user in users:\n","    \n","    if user in ratings_count:\n","        ratings_count[user] += 1\n","    \n","    else:\n","        ratings_count[user] = 1"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"OqpX9rS9cJm_"},"outputs":[],"source":["RATINGS_CUTOFF = 90\n","remove_users = []\n","for user, num_ratings in ratings_count.items():\n","    if num_ratings < RATINGS_CUTOFF:\n","        remove_users.append(user)\n","df = df.loc[~df.user_id.isin(remove_users)]"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"mYHwPDYFcNIB"},"outputs":[],"source":["songs = df.song_id\n","\n","ratings_count = dict()\n","\n","for song in songs:\n","    \n","    if song in ratings_count:\n","        ratings_count[song] += 1\n","    \n","    else:\n","        ratings_count[song] = 1 "]},{"cell_type":"code","execution_count":null,"metadata":{"id":"G8s8Ysy4cRDb"},"outputs":[],"source":["RATINGS_CUTOFF = 120\n","\n","remove_songs = []\n","\n","for song, num_ratings in ratings_count.items():\n","    if num_ratings < RATINGS_CUTOFF:\n","        remove_songs.append(song)\n","\n","df_final = df.loc[ ~ df.song_id.isin(remove_songs)]"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"s79ExgnZcVKn"},"outputs":[],"source":["df_final=df_final[df_final.play_count<=5]"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"HxYGaxKFcX5q","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156073903,"user_tz":300,"elapsed":223,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"fd7f51bf-c29e-4480-cbd6-f3b9957604b1"},"outputs":[{"output_type":"stream","name":"stdout","text":["<class 'pandas.core.frame.DataFrame'>\n","Int64Index: 117876 entries, 200 to 1999765\n","Data columns (total 7 columns):\n"," #   Column       Non-Null Count   Dtype \n","---  ------       --------------   ----- \n"," 0   user_id      117876 non-null  int64 \n"," 1   song_id      117876 non-null  int64 \n"," 2   play_count   117876 non-null  int64 \n"," 3   title        117876 non-null  object\n"," 4   release      117876 non-null  object\n"," 5   artist_name  117876 non-null  object\n"," 6   year         117876 non-null  int64 \n","dtypes: int64(4), object(3)\n","memory usage: 7.2+ MB\n"]}],"source":["df_final.info()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"5DtHJYNKcbs5","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156073903,"user_tz":300,"elapsed":23,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"3865ab15-08e6-4952-a4ae-62b93434108c"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["(117876, 7)"]},"metadata":{},"execution_count":35}],"source":["df_final.shape"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"UkpJNxSgce_y","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156073904,"user_tz":300,"elapsed":22,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"b0cf5d5f-277a-46e8-835f-183c6bc65111"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["825132"]},"metadata":{},"execution_count":36}],"source":["df_final.size"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"8lPFj9_Xcj91","colab":{"base_uri":"https://localhost:8080/","height":206},"executionInfo":{"status":"ok","timestamp":1671156073905,"user_tz":300,"elapsed":21,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"f4f891c3-2804-4e89-963d-fad1ff36c0d0"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["     user_id  song_id  play_count                            title  \\\n","200     6958      447           1               Daisy And Prudence   \n","202     6958      512           1  The Ballad of Michael Valentine   \n","203     6958      549           1        I Stand Corrected (Album)   \n","204     6958      703           1            They Might Follow You   \n","205     6958      719           1                       Monkey Man   \n","\n","                  release      artist_name  year  \n","200          Distillation     Erin McKeown  2000  \n","202               Sawdust      The Killers  2004  \n","203       Vampire Weekend  Vampire Weekend  2007  \n","204           Tiny Vipers      Tiny Vipers  2007  \n","205  You Know I'm No Good    Amy Winehouse  2007  "],"text/html":["\n","  <div id=\"df-c9eea2f5-06c0-4961-a46d-810338c58ec8\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>user_id</th>\n","      <th>song_id</th>\n","      <th>play_count</th>\n","      <th>title</th>\n","      <th>release</th>\n","      <th>artist_name</th>\n","      <th>year</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>200</th>\n","      <td>6958</td>\n","      <td>447</td>\n","      <td>1</td>\n","      <td>Daisy And Prudence</td>\n","      <td>Distillation</td>\n","      <td>Erin McKeown</td>\n","      <td>2000</td>\n","    </tr>\n","    <tr>\n","      <th>202</th>\n","      <td>6958</td>\n","      <td>512</td>\n","      <td>1</td>\n","      <td>The Ballad of Michael Valentine</td>\n","      <td>Sawdust</td>\n","      <td>The Killers</td>\n","      <td>2004</td>\n","    </tr>\n","    <tr>\n","      <th>203</th>\n","      <td>6958</td>\n","      <td>549</td>\n","      <td>1</td>\n","      <td>I Stand Corrected (Album)</td>\n","      <td>Vampire Weekend</td>\n","      <td>Vampire Weekend</td>\n","      <td>2007</td>\n","    </tr>\n","    <tr>\n","      <th>204</th>\n","      <td>6958</td>\n","      <td>703</td>\n","      <td>1</td>\n","      <td>They Might Follow You</td>\n","      <td>Tiny Vipers</td>\n","      <td>Tiny Vipers</td>\n","      <td>2007</td>\n","    </tr>\n","    <tr>\n","      <th>205</th>\n","      <td>6958</td>\n","      <td>719</td>\n","      <td>1</td>\n","      <td>Monkey Man</td>\n","      <td>You Know I'm No Good</td>\n","      <td>Amy Winehouse</td>\n","      <td>2007</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-c9eea2f5-06c0-4961-a46d-810338c58ec8')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-c9eea2f5-06c0-4961-a46d-810338c58ec8 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-c9eea2f5-06c0-4961-a46d-810338c58ec8');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":37}],"source":["df_final.head()"]},{"cell_type":"markdown","metadata":{"id":"vcRsL5jScnjS"},"source":["**Exploratory Data Analysis**\n","\n","**Let's check the total number of unique users, songs, artists in the data**\n","\n","Total number of unique user id"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"d7Nj67s0ct75","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156073905,"user_tz":300,"elapsed":20,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"86660512-f1c8-4add-c8b6-008ea3e676b0"},"outputs":[{"output_type":"stream","name":"stdout","text":["Number of unique USERS in Raw data =  3155\n"]}],"source":["print('Number of unique USERS in Raw data = ', df_final['user_id'].nunique())"]},{"cell_type":"markdown","metadata":{"id":"e_b4lDBZcxzc"},"source":["Total number of unique song id"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"aVF_O7c3c1Ib","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156073905,"user_tz":300,"elapsed":18,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"9f5bd10c-56cb-4149-896c-1ab1d21ede4b"},"outputs":[{"output_type":"stream","name":"stdout","text":["Number of unique SONGS in Raw data =  563\n"]}],"source":["print('Number of unique SONGS in Raw data = ', df_final['song_id'].nunique())"]},{"cell_type":"markdown","metadata":{"id":"F1vaIWl1c4mS"},"source":["Total number of unique artists"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"VeGtgVIBc8HG","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156073905,"user_tz":300,"elapsed":16,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"344d7d01-9b76-4b45-9772-c0434c0f1906"},"outputs":[{"output_type":"stream","name":"stdout","text":["Number of unique ARTISTS in Raw data =  232\n"]}],"source":["print('Number of unique ARTISTS in Raw data = ', df_final['artist_name'].nunique())"]},{"cell_type":"markdown","metadata":{"id":"Rpn0GU0KdBS0"},"source":["**Observations and Insights:**\n","\n","*   There is a decent amount of unique users that have listened to at least 90 songs in the dataset but after the reduction of users from the minimum requirement of songs listened to I am surprised it is still kind of high. My guess is that many users just listen to music casually without repeating songs or the recommendation system in place from past interactions isn't entirely suited to their music interests.\n","*   There is a much smaller number of unique songs in the revised dataset which indicates that they are getting a lot of users listening to them. Maybe these are attractive songs for the recommendation system to suggest in terms of past interactions but not popular songs in the mainstream where they will receive more than one listen on a streaming service.\n","*   The total number of unique artists is even smaller than the unique songs so based off the revised dataset maybe these are lesser known artists in terms of popularity or its possible they don't have much music available in the dataset. Maybe they also did not receive enough listens of their music so they did not show up in the condensed dataset."]},{"cell_type":"markdown","metadata":{"id":"jelzxjKYdYBB"},"source":["**Let's find out about the most interacted songs and interacted users**\n","\n","Most interacted songs"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"9K4GhG9xdcIm","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156073906,"user_tz":300,"elapsed":15,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"16163cff-6d23-4496-e02e-4a2d13da1154"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["song_id\n","8582    751\n","352     748\n","2220    713\n","1118    662\n","4152    652\n","5531    618\n","4448    609\n","6189    606\n","6293    583\n","1334    570\n","dtype: int64"]},"metadata":{},"execution_count":41}],"source":["most_rated = df_final.groupby('song_id').size().sort_values(ascending = False)[:10]\n","most_rated"]},{"cell_type":"code","source":["# Plotting distributions of play counts for 751 interactions with song_id 8582\n","\n","plt.figure(figsize = (7, 7))\n","\n","df_final[df_final['song_id'] == 8582]['play_count'].value_counts().plot(kind = 'bar')\n","\n","plt.xlabel('Play Counts')\n","\n","plt.ylabel('Interactions')\n","\n","plt.show()"],"metadata":{"id":"0ynsaJ2iS9fE","colab":{"base_uri":"https://localhost:8080/","height":439},"executionInfo":{"status":"ok","timestamp":1671156073906,"user_tz":300,"elapsed":13,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"f62d87a3-6b3f-4340-cfdc-69c7e717c001"},"execution_count":null,"outputs":[{"output_type":"display_data","data":{"text/plain":["<Figure size 504x504 with 1 Axes>"],"image/png":"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\n"},"metadata":{"needs_background":"light"}}]},{"cell_type":"markdown","source":["*   Plotting the song with the most ratings (song_id 8582 with 751 interactions) shows an interesting breakdown as to how many times the song was listened to with the cap of 5 interactions maximum. Almost half of the interactions had just one listen and decreased with every possible interaction. So overall, despite the song being the most interacted with, it is not a song that streamers will likely go back and listen to multiple times."],"metadata":{"id":"h9Yg6c-kS_v8"}},{"cell_type":"markdown","metadata":{"id":"F70akpoAdffa"},"source":["Most interacted users"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"SGodkAnadhhs","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156073906,"user_tz":300,"elapsed":12,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"ffe2fb7c-c753-4c28-d0b3-882220f59082"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["user_id\n","61472    243\n","15733    227\n","37049    202\n","9570     184\n","23337    177\n","10763    176\n","9097     175\n","26616    175\n","43041    174\n","65994    171\n","dtype: int64"]},"metadata":{},"execution_count":43}],"source":["most_rated = df_final.groupby('user_id').size().sort_values(ascending = False)[:10]\n","most_rated"]},{"cell_type":"markdown","source":["Interacted songs by year"],"metadata":{"id":"CC7JqqV7TOc9"}},{"cell_type":"code","source":["most_rated = df_final.groupby('year').size().sort_values(ascending = False)[:10]\n","most_rated"],"metadata":{"id":"7MtFDJ3vTROv","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156074099,"user_tz":300,"elapsed":203,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"0a3db077-db43-4f82-d7b7-1f94333a3f02"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["year\n","0       20649\n","2009    16351\n","2008    14031\n","2007    13750\n","2003     7928\n","2006     7592\n","2005     5376\n","2002     5135\n","2000     4834\n","2010     4087\n","dtype: int64"]},"metadata":{},"execution_count":44}]},{"cell_type":"markdown","source":["*   Looking at the interactions by year, the most are from the group that had a '0' entered in this column. While I didn't remove the 'year' column from this notebook altogether at the beginning or remove all songs that have the number '0' in the year column, this could be an interesting code to run in terms of how the year of the song could affect the recommendation system. The rest of the top 10 are years that are all in the decade of the 2000's except for the year 2010, so the newer the song the more likely an interaction will transpire.\n","\n","*   **Removing the year column:**\n","\n","    df.drop(['year'], axis=1, inplace=True)\n","\n","*   **Removing all songs with a '0' in the year column:**\n","df_final=df_final[df_final.year>=1]"],"metadata":{"id":"PDxqSiFOTb-i"}},{"cell_type":"markdown","source":["Interacted songs by artist"],"metadata":{"id":"zMJZnY-rLtgU"}},{"cell_type":"code","source":["most_rated = df_final.groupby('artist_name').size().sort_values(ascending = False)[:10]\n","most_rated"],"metadata":{"id":"FRVz7knQLvyc","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156074099,"user_tz":300,"elapsed":21,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"6f26ae28-fa35-4d56-8cd3-c36e92748afe"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["artist_name\n","Coldplay                  5317\n","The Killers               4128\n","Florence + The Machine    2896\n","Kings Of Leon             2864\n","the bird and the bee      2387\n","LCD Soundsystem           2168\n","Vampire Weekend           2145\n","Justin Bieber             2130\n","Octopus Project           1825\n","Soltero                   1691\n","dtype: int64"]},"metadata":{},"execution_count":45}]},{"cell_type":"markdown","source":["Interacted songs by release"],"metadata":{"id":"tBFl0rYfT_a0"}},{"cell_type":"code","source":["most_rated = df_final.groupby('release').size().sort_values(ascending = False)[:10]\n","most_rated"],"metadata":{"id":"hT70vEz2UAON","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156074099,"user_tz":300,"elapsed":14,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"121b7583-36ed-4967-b089-c4203fd5f0bb"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["release\n","Ray Guns Are Not Just The Future    1843\n","My Worlds                           1724\n","Vampire Weekend                     1699\n","Hell Train                          1691\n","Give Up                             1604\n","Lungs                               1511\n","A Rush Of Blood To The Head         1277\n","Only By The Night                   1198\n","Save Me_ San Francisco              1065\n","Identification Parade               1042\n","dtype: int64"]},"metadata":{},"execution_count":46}]},{"cell_type":"markdown","source":["*   Was curious to see how the interactions were for the song, artist name, and album releases, and there is definitely a select few that are very popular with over 1000 interactions. I believe that could be a solid sign that the recommendation system is doing a good job in finding the right songs to recommend and that there is somewhat of a balance there between popular and more unknown songs."],"metadata":{"id":"x4nWiT-FUHgM"}},{"cell_type":"markdown","source":["Interacted songs by play counts"],"metadata":{"id":"u_TXUZrnUS9Y"}},{"cell_type":"code","source":["most_rated = df_final.groupby('play_count').size().sort_values(ascending = False)[:10]\n","most_rated"],"metadata":{"id":"VBx0Av7vUTwc","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156074100,"user_tz":300,"elapsed":11,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"33708013-cf89-47d3-a4fa-db342d2fd330"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["play_count\n","1    72473\n","2    23890\n","3    10774\n","4     5874\n","5     4865\n","dtype: int64"]},"metadata":{},"execution_count":47}]},{"cell_type":"code","source":["df_final.play_count.value_counts()"],"metadata":{"id":"Fziwd93_UZia","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156074100,"user_tz":300,"elapsed":8,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"94cb277d-f67c-4a77-d7d5-a9560be2b18f"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["1    72473\n","2    23890\n","3    10774\n","4     5874\n","5     4865\n","Name: play_count, dtype: int64"]},"metadata":{},"execution_count":48}]},{"cell_type":"code","source":["plt.pie(df_final.play_count.value_counts(), autopct = '%.1f%%', radius = 1.2, labels = ['1','2','3','4','5'])\n","plt.show()"],"metadata":{"id":"gTkHQUNuUdby","colab":{"base_uri":"https://localhost:8080/","height":261},"executionInfo":{"status":"ok","timestamp":1671156074273,"user_tz":300,"elapsed":178,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"3876b7d3-6d47-4b83-bb9f-c62cfad1ef77"},"execution_count":null,"outputs":[{"output_type":"display_data","data":{"text/plain":["<Figure size 432x288 with 1 Axes>"],"image/png":"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\n"},"metadata":{}}]},{"cell_type":"markdown","source":["*   Showing the total number of interactions per play count which has been set to 5 maximum, the amount of interactions decreases as each number of play counts increases. Just one interaction has the highest number and 5 total interactions has the lowest.\n","*   In the pie chart with the amount in percentages, 61.5 percent of the interactions occur with just one play count, followed by 20.3 percent with two play counts and only 4.1 percent with 5 play counts. So you're more likely than not going to have just one interaction between a particular user and song."],"metadata":{"id":"2g0aFRYaUiW0"}},{"cell_type":"markdown","metadata":{"id":"o5lhDRJUdmqd"},"source":["**Observations and Insights:**\n","\n","*   Despite a reduced dataset from the revised requirements put in place, there are still plenty of songs that have been played by users or have been seeked out by users to listen to and more than once. Even looking at the top 50 songs there is over 400 interactions per song.\n","*   The total amount of interactions in the list of users is smaller than the song interactions with the top user haivng 247 interactions. With a million songs in the database this means that a stronger recommendation could be implemented so that more interactions take place."]},{"cell_type":"markdown","metadata":{"id":"xf1yuljMdyN0"},"source":["Songs played in a year"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"82dYTEZ_d09A","colab":{"base_uri":"https://localhost:8080/","height":237},"executionInfo":{"status":"ok","timestamp":1671156074274,"user_tz":300,"elapsed":5,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"9d8b45f8-f36d-42d2-d2b9-73f6fa683f18"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["      title\n","year       \n","2006   7592\n","2007  13750\n","2008  14031\n","2009  16351\n","2010   4087"],"text/html":["\n","  <div id=\"df-45cda57d-b8a9-4a1d-8b17-7d91bbbcb230\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>title</th>\n","    </tr>\n","    <tr>\n","      <th>year</th>\n","      <th></th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>2006</th>\n","      <td>7592</td>\n","    </tr>\n","    <tr>\n","      <th>2007</th>\n","      <td>13750</td>\n","    </tr>\n","    <tr>\n","      <th>2008</th>\n","      <td>14031</td>\n","    </tr>\n","    <tr>\n","      <th>2009</th>\n","      <td>16351</td>\n","    </tr>\n","    <tr>\n","      <th>2010</th>\n","      <td>4087</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-45cda57d-b8a9-4a1d-8b17-7d91bbbcb230')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-45cda57d-b8a9-4a1d-8b17-7d91bbbcb230 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-45cda57d-b8a9-4a1d-8b17-7d91bbbcb230');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":50}],"source":["count_songs = df_final.groupby('year').count()['title']\n","\n","count = pd.DataFrame(count_songs)\n","\n","count.drop(count.index[0], inplace = True)\n","\n","count.tail()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"2sk7KsXld4hg","colab":{"base_uri":"https://localhost:8080/","height":409},"executionInfo":{"status":"ok","timestamp":1671156074860,"user_tz":300,"elapsed":590,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"d53cc3c0-3eff-43d7-a7a0-e5e0d83450c4"},"outputs":[{"output_type":"display_data","data":{"text/plain":["<Figure size 2160x720 with 1 Axes>"],"image/png":"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\n"},"metadata":{"needs_background":"light"}}],"source":["plt.figure(figsize = (30, 10))\n","\n","sns.barplot(x = count.index,\n","            y = 'title',\n","            data = count,\n","            estimator = np.median)\n","\n","plt.ylabel('number of titles played') \n","\n","plt.show()"]},{"cell_type":"markdown","source":["Songs played by artist"],"metadata":{"id":"p_iQKn_hU0Be"}},{"cell_type":"code","source":["count_artist_names = df_final.groupby('artist_name').count()['title']\n","\n","count = pd.DataFrame(count_artist_names)\n","\n","count.drop(count.index[0], inplace = True)\n","\n","count.head(10)"],"metadata":{"id":"BuQn9nxXU294","colab":{"base_uri":"https://localhost:8080/","height":394},"executionInfo":{"status":"ok","timestamp":1671156074860,"user_tz":300,"elapsed":9,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"442534f2-0e7d-4c2c-9ac1-2f9e58af6a5e"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["                     title\n","artist_name               \n","A Day To Remember      213\n","Adam Lambert           540\n","Aerosmith              403\n","Alicia Keys            362\n","Alliance Ethnik        717\n","Aloe Blacc             117\n","Amy Winehouse         1268\n","Angels and Airwaves    301\n","Arcade Fire            409\n","Avril Lavigne          156"],"text/html":["\n","  <div id=\"df-cd16351c-f271-4067-913e-3931fff7be7c\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>title</th>\n","    </tr>\n","    <tr>\n","      <th>artist_name</th>\n","      <th></th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>A Day To Remember</th>\n","      <td>213</td>\n","    </tr>\n","    <tr>\n","      <th>Adam Lambert</th>\n","      <td>540</td>\n","    </tr>\n","    <tr>\n","      <th>Aerosmith</th>\n","      <td>403</td>\n","    </tr>\n","    <tr>\n","      <th>Alicia Keys</th>\n","      <td>362</td>\n","    </tr>\n","    <tr>\n","      <th>Alliance Ethnik</th>\n","      <td>717</td>\n","    </tr>\n","    <tr>\n","      <th>Aloe Blacc</th>\n","      <td>117</td>\n","    </tr>\n","    <tr>\n","      <th>Amy Winehouse</th>\n","      <td>1268</td>\n","    </tr>\n","    <tr>\n","      <th>Angels and Airwaves</th>\n","      <td>301</td>\n","    </tr>\n","    <tr>\n","      <th>Arcade Fire</th>\n","      <td>409</td>\n","    </tr>\n","    <tr>\n","      <th>Avril Lavigne</th>\n","      <td>156</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-cd16351c-f271-4067-913e-3931fff7be7c')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-cd16351c-f271-4067-913e-3931fff7be7c button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-cd16351c-f271-4067-913e-3931fff7be7c');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":52}]},{"cell_type":"markdown","source":["Songs played by release"],"metadata":{"id":"L1lKe-mVU93u"}},{"cell_type":"code","source":["count_artist_names = df_final.groupby('release').count()['title']\n","\n","count = pd.DataFrame(count_artist_names)\n","\n","count.drop(count.index[0], inplace = True)\n","\n","count.tail(10)"],"metadata":{"id":"omKUIg8lU-o3","colab":{"base_uri":"https://localhost:8080/","height":394},"executionInfo":{"status":"ok","timestamp":1671156074861,"user_tz":300,"elapsed":8,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"2301d5d1-bf1d-45cd-f1d4-80b1b3fb4f3e"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["                                    title\n","release                                  \n","Workout Holiday                       108\n","X & Y                                 503\n","Yellow                                583\n","You Know I'm No Good                  139\n","You Know I'm No Good - GFK Version    285\n","Youth And Young Manhood               132\n","Yuugata Generation                    183\n","the bird and the bee                  405\n","xx                                    120\n","À La Carte                            119"],"text/html":["\n","  <div id=\"df-88cba80d-af36-402b-b536-160d19895b21\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>title</th>\n","    </tr>\n","    <tr>\n","      <th>release</th>\n","      <th></th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>Workout Holiday</th>\n","      <td>108</td>\n","    </tr>\n","    <tr>\n","      <th>X &amp; Y</th>\n","      <td>503</td>\n","    </tr>\n","    <tr>\n","      <th>Yellow</th>\n","      <td>583</td>\n","    </tr>\n","    <tr>\n","      <th>You Know I'm No Good</th>\n","      <td>139</td>\n","    </tr>\n","    <tr>\n","      <th>You Know I'm No Good - GFK Version</th>\n","      <td>285</td>\n","    </tr>\n","    <tr>\n","      <th>Youth And Young Manhood</th>\n","      <td>132</td>\n","    </tr>\n","    <tr>\n","      <th>Yuugata Generation</th>\n","      <td>183</td>\n","    </tr>\n","    <tr>\n","      <th>the bird and the bee</th>\n","      <td>405</td>\n","    </tr>\n","    <tr>\n","      <th>xx</th>\n","      <td>120</td>\n","    </tr>\n","    <tr>\n","      <th>À La Carte</th>\n","      <td>119</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-88cba80d-af36-402b-b536-160d19895b21')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-88cba80d-af36-402b-b536-160d19895b21 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-88cba80d-af36-402b-b536-160d19895b21');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":53}]},{"cell_type":"markdown","source":["*   Observing the samples for interactions from releases and artists, it is a bit more lopsided from the artist sample than the release sample. I do wonder if multiple playcount numbers from particular songs increaes certain artists interaction totals and that is where the major difference is between artists."],"metadata":{"id":"-BbbS0PEVF5g"}},{"cell_type":"markdown","metadata":{"id":"CwJ4BUkHd_1i"},"source":["**Observations and Insights:**\n","\n","*   From the last five years there is a noticable difference in songs that came from those years compared to previous years. This might idenitfy a certain demographic in who is using the database and what songs and artists they are listening to.\n","*   Looking at the graph it clearly shows that the amount of songs in the database decrease the farther back you go in years. From this century the majority of the songs come from that time frame, while there is some songs from the 1990's but much lower in quantity. It becomes very small in numbers before 1990, so the newer the song the more likely that it is going to be listened to by the user."]},{"cell_type":"markdown","metadata":{"id":"vnvA7qsseLMv"},"source":["**Think About It:** What other insights can be drawn using exploratory data analysis?\n","\n","*   From the values you can see what users are listening to more than anything which is newer music and that they are not seeking out older music, but it could also depend on the age of the user.\n","*   If the majority of songs are newer, then building a recommendation system based off that information could make it easier to find the 10 best recommendated songs depending on past interactions.\n","*   If there are less unique artists then this could also be important to constructing an algorithm where it can locate popular artists but also find lesser known artists that can be recommended to users."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"vaEG9XXbelEA","colab":{"base_uri":"https://localhost:8080/","height":17},"executionInfo":{"status":"ok","timestamp":1671156075710,"user_tz":300,"elapsed":856,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"a182cbae-3ca8-4c3b-b5cf-748dc05b8b7b"},"outputs":[{"output_type":"display_data","data":{"text/plain":["<IPython.core.display.Javascript object>"],"application/javascript":["\n","    async function download(id, filename, size) {\n","      if (!google.colab.kernel.accessAllowed) {\n","        return;\n","      }\n","      const div = document.createElement('div');\n","      const label = document.createElement('label');\n","      label.textContent = `Downloading \"${filename}\": `;\n","      div.appendChild(label);\n","      const progress = document.createElement('progress');\n","      progress.max = size;\n","      div.appendChild(progress);\n","      document.body.appendChild(div);\n","\n","      const buffers = [];\n","      let downloaded = 0;\n","\n","      const channel = await google.colab.kernel.comms.open(id);\n","      // Send a message to notify the kernel that we're ready.\n","      channel.send({})\n","\n","      for await (const message of channel.messages) {\n","        // Send a message to notify the kernel that we're ready.\n","        channel.send({})\n","        if (message.buffers) {\n","          for (const buffer of message.buffers) {\n","            buffers.push(buffer);\n","            downloaded += buffer.byteLength;\n","            progress.value = downloaded;\n","          }\n","        }\n","      }\n","      const blob = new Blob(buffers, {type: 'application/binary'});\n","      const a = document.createElement('a');\n","      a.href = window.URL.createObjectURL(blob);\n","      a.download = filename;\n","      div.appendChild(a);\n","      a.click();\n","      div.remove();\n","    }\n","  "]},"metadata":{}},{"output_type":"display_data","data":{"text/plain":["<IPython.core.display.Javascript object>"],"application/javascript":["download(\"download_e2b69ea5-caee-4497-a7f0-8d07bd985757\", \"df_final.csv\", 8784854)"]},"metadata":{}}],"source":["from google.colab import files\n","df_final.to_csv('df_final.csv', encoding = 'utf-8-sig') \n","files.download('df_final.csv')"]},{"cell_type":"markdown","metadata":{"id":"FsjhWiGVjqmU"},"source":["**Milestone 2**\n","\n","*   Now that we have explored the data, let's apply different algorithms to build recommendation systems.\n","*   Note: Use the shorter version of the data, i.e., the data after the cutoffs as used in Milestone 1.\n","\n","**Load the dataset**"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"6YLwm9hWj0-m","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156076777,"user_tz":300,"elapsed":1069,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"57998c65-8391-4b80-bc9b-e09319db9500"},"outputs":[{"output_type":"stream","name":"stdout","text":["Drive already mounted at /content/drive; to attempt to forcibly remount, call drive.mount(\"/content/drive\", force_remount=True).\n"]}],"source":["from google.colab import drive\n","drive.mount('/content/drive')"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"22UiHcArj8Mc","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156079866,"user_tz":300,"elapsed":3091,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"e1cdb9d8-48c5-4f7c-8893-cb4da0a13fc5"},"outputs":[{"output_type":"stream","name":"stdout","text":["Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Requirement already satisfied: scipy in /usr/local/lib/python3.8/dist-packages (1.7.3)\n","Requirement already satisfied: numpy<1.23.0,>=1.16.5 in /usr/local/lib/python3.8/dist-packages (from scipy) (1.21.6)\n"]}],"source":["import warnings\n","warnings.filterwarnings('ignore')\n","\n","import numpy as np\n","import pandas as pd\n","\n","import matplotlib.pyplot as plt\n","\n","import seaborn as sns\n","\n","from sklearn.metrics.pairwise import cosine_similarity\n","\n","from collections import defaultdict\n","\n","from sklearn.metrics import mean_squared_error\n","\n","!pip install scipy\n","\n","from pandas.core.arrays.interval import le\n","from sklearn.preprocessing import LabelEncoder\n","from sklearn.metrics.pairwise import cosine_similarity"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"_NC6hJvfkBXK"},"outputs":[],"source":["df_final = pd.read_csv('/content/drive/MyDrive/df_final (6).csv')"]},{"cell_type":"markdown","metadata":{"id":"z0HBJiqykIAO"},"source":["**Popularity-Based Recommendation Systems¶**\n","\n","Let's take the count and sum of play counts of the songs and build the popularity recommendation systems based on the sum of play counts."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"lY2fvMt8kMyr"},"outputs":[],"source":["average_count = df_final.groupby(['song_id']).mean()['play_count']\n","\n","play_freq = df_final.groupby(['song_id']).count()['play_count']"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Ah2BUwWWkPxt","colab":{"base_uri":"https://localhost:8080/","height":237},"executionInfo":{"status":"ok","timestamp":1671156080061,"user_tz":300,"elapsed":10,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"f7cbb6de-aa7b-4ae0-ee6a-2f8a1644aac1"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["         avg_count  play_freq\n","song_id                      \n","21        1.622642        265\n","22        1.492424        132\n","52        1.729216        421\n","62        1.728070        114\n","93        1.452174        115"],"text/html":["\n","  <div id=\"df-65a155e3-5a31-497d-8e4a-353720bf7424\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>avg_count</th>\n","      <th>play_freq</th>\n","    </tr>\n","    <tr>\n","      <th>song_id</th>\n","      <th></th>\n","      <th></th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>21</th>\n","      <td>1.622642</td>\n","      <td>265</td>\n","    </tr>\n","    <tr>\n","      <th>22</th>\n","      <td>1.492424</td>\n","      <td>132</td>\n","    </tr>\n","    <tr>\n","      <th>52</th>\n","      <td>1.729216</td>\n","      <td>421</td>\n","    </tr>\n","    <tr>\n","      <th>62</th>\n","      <td>1.728070</td>\n","      <td>114</td>\n","    </tr>\n","    <tr>\n","      <th>93</th>\n","      <td>1.452174</td>\n","      <td>115</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-65a155e3-5a31-497d-8e4a-353720bf7424')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-65a155e3-5a31-497d-8e4a-353720bf7424 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-65a155e3-5a31-497d-8e4a-353720bf7424');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":59}],"source":["final_play = pd.DataFrame({'avg_count': average_count, 'play_freq': play_freq})\n","\n","final_play.head()"]},{"cell_type":"markdown","metadata":{"id":"6nEzWC9qkUOG"},"source":["Now, let's create a function to find the top n songs for a recommendation based on the average play count of song. We can also add a threshold for a minimum number of playcounts for a song to be considered for recommendation."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"pQVZl4sUkXYY"},"outputs":[],"source":["def top_n_songs(data, n, min_interaction = 100):\n","\n","  recommendations = data[data['play_freq'] > min_interaction]\n","\n","  recommendations = recommendations.sort_values(by = 'avg_count', ascending = False)\n","\n","  return recommendations.index[:n]"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"RbYqgs08ka6h","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156080062,"user_tz":300,"elapsed":10,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"1fbb5afa-a541-449b-d182-c7b2028b1b74"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["[7224, 6450, 9942, 5531, 5653, 8483, 2220, 657, 614, 352]"]},"metadata":{},"execution_count":61}],"source":["list(top_n_songs(final_play, 10, 100))"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"TmnELMhM230N","colab":{"base_uri":"https://localhost:8080/","height":424},"executionInfo":{"status":"ok","timestamp":1671156080250,"user_tz":300,"elapsed":192,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"7a37524e-7d11-4f7d-93fe-241392cf6ea3"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["        Unnamed: 0  user_id  song_id  play_count                  title  \\\n","1850         24098    23297     7224           5  Victoria (LP Version)   \n","2037         28161    76307     7224           1  Victoria (LP Version)   \n","2245         31860    26149     7224           1  Victoria (LP Version)   \n","4362         76415    33280     7224           5  Victoria (LP Version)   \n","4766         81358    42453     7224           1  Victoria (LP Version)   \n","...            ...      ...      ...         ...                    ...   \n","111323     1883439    31269     7224           5  Victoria (LP Version)   \n","112158     1903542    28099     7224           5  Victoria (LP Version)   \n","114439     1948494    36058     7224           1  Victoria (LP Version)   \n","115786     1968497    27606     7224           5  Victoria (LP Version)   \n","115887     1969785      902     7224           5  Victoria (LP Version)   \n","\n","                                     release artist_name  year  \n","1850    Hit By A Train: The Best Of Old 97's    Old 97's  2006  \n","2037    Hit By A Train: The Best Of Old 97's    Old 97's  2006  \n","2245    Hit By A Train: The Best Of Old 97's    Old 97's  2006  \n","4362    Hit By A Train: The Best Of Old 97's    Old 97's  2006  \n","4766    Hit By A Train: The Best Of Old 97's    Old 97's  2006  \n","...                                      ...         ...   ...  \n","111323  Hit By A Train: The Best Of Old 97's    Old 97's  2006  \n","112158  Hit By A Train: The Best Of Old 97's    Old 97's  2006  \n","114439  Hit By A Train: The Best Of Old 97's    Old 97's  2006  \n","115786  Hit By A Train: The Best Of Old 97's    Old 97's  2006  \n","115887  Hit By A Train: The Best Of Old 97's    Old 97's  2006  \n","\n","[107 rows x 8 columns]"],"text/html":["\n","  <div id=\"df-505958bf-12f2-4049-8d72-21423858b145\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>Unnamed: 0</th>\n","      <th>user_id</th>\n","      <th>song_id</th>\n","      <th>play_count</th>\n","      <th>title</th>\n","      <th>release</th>\n","      <th>artist_name</th>\n","      <th>year</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>1850</th>\n","      <td>24098</td>\n","      <td>23297</td>\n","      <td>7224</td>\n","      <td>5</td>\n","      <td>Victoria (LP Version)</td>\n","      <td>Hit By A Train: The Best Of Old 97's</td>\n","      <td>Old 97's</td>\n","      <td>2006</td>\n","    </tr>\n","    <tr>\n","      <th>2037</th>\n","      <td>28161</td>\n","      <td>76307</td>\n","      <td>7224</td>\n","      <td>1</td>\n","      <td>Victoria (LP Version)</td>\n","      <td>Hit By A Train: The Best Of Old 97's</td>\n","      <td>Old 97's</td>\n","      <td>2006</td>\n","    </tr>\n","    <tr>\n","      <th>2245</th>\n","      <td>31860</td>\n","      <td>26149</td>\n","      <td>7224</td>\n","      <td>1</td>\n","      <td>Victoria (LP Version)</td>\n","      <td>Hit By A Train: The Best Of Old 97's</td>\n","      <td>Old 97's</td>\n","      <td>2006</td>\n","    </tr>\n","    <tr>\n","      <th>4362</th>\n","      <td>76415</td>\n","      <td>33280</td>\n","      <td>7224</td>\n","      <td>5</td>\n","      <td>Victoria (LP Version)</td>\n","      <td>Hit By A Train: The Best Of Old 97's</td>\n","      <td>Old 97's</td>\n","      <td>2006</td>\n","    </tr>\n","    <tr>\n","      <th>4766</th>\n","      <td>81358</td>\n","      <td>42453</td>\n","      <td>7224</td>\n","      <td>1</td>\n","      <td>Victoria (LP Version)</td>\n","      <td>Hit By A Train: The Best Of Old 97's</td>\n","      <td>Old 97's</td>\n","      <td>2006</td>\n","    </tr>\n","    <tr>\n","      <th>...</th>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","    </tr>\n","    <tr>\n","      <th>111323</th>\n","      <td>1883439</td>\n","      <td>31269</td>\n","      <td>7224</td>\n","      <td>5</td>\n","      <td>Victoria (LP Version)</td>\n","      <td>Hit By A Train: The Best Of Old 97's</td>\n","      <td>Old 97's</td>\n","      <td>2006</td>\n","    </tr>\n","    <tr>\n","      <th>112158</th>\n","      <td>1903542</td>\n","      <td>28099</td>\n","      <td>7224</td>\n","      <td>5</td>\n","      <td>Victoria (LP Version)</td>\n","      <td>Hit By A Train: The Best Of Old 97's</td>\n","      <td>Old 97's</td>\n","      <td>2006</td>\n","    </tr>\n","    <tr>\n","      <th>114439</th>\n","      <td>1948494</td>\n","      <td>36058</td>\n","      <td>7224</td>\n","      <td>1</td>\n","      <td>Victoria (LP Version)</td>\n","      <td>Hit By A Train: The Best Of Old 97's</td>\n","      <td>Old 97's</td>\n","      <td>2006</td>\n","    </tr>\n","    <tr>\n","      <th>115786</th>\n","      <td>1968497</td>\n","      <td>27606</td>\n","      <td>7224</td>\n","      <td>5</td>\n","      <td>Victoria (LP Version)</td>\n","      <td>Hit By A Train: The Best Of Old 97's</td>\n","      <td>Old 97's</td>\n","      <td>2006</td>\n","    </tr>\n","    <tr>\n","      <th>115887</th>\n","      <td>1969785</td>\n","      <td>902</td>\n","      <td>7224</td>\n","      <td>5</td>\n","      <td>Victoria (LP Version)</td>\n","      <td>Hit By A Train: The Best Of Old 97's</td>\n","      <td>Old 97's</td>\n","      <td>2006</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>107 rows × 8 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-505958bf-12f2-4049-8d72-21423858b145')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-505958bf-12f2-4049-8d72-21423858b145 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-505958bf-12f2-4049-8d72-21423858b145');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":62}],"source":["df_final[df_final['song_id'] == 7224]"]},{"cell_type":"markdown","source":["*   Using the top song (7224) based on average play count, this code shows some of its users who interacted with the song.\n","\n"],"metadata":{"id":"gblCrzyvc3qN"}},{"cell_type":"markdown","metadata":{"id":"-Y-cphZwkfcB"},"source":["**User User Similarity-Based Collaborative Filtering**\n","\n","To build the user-user-similarity-based and subsequent models we will use the \"surprise\" library."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"NN4-j4PUkj7h","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156083550,"user_tz":300,"elapsed":3303,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"289325d0-013c-46ad-bb99-3bff4833f5b0"},"outputs":[{"output_type":"stream","name":"stdout","text":["Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Requirement already satisfied: surprise in /usr/local/lib/python3.8/dist-packages (0.1)\n","Requirement already satisfied: scikit-surprise in /usr/local/lib/python3.8/dist-packages (from surprise) (1.1.3)\n","Requirement already satisfied: joblib>=1.0.0 in /usr/local/lib/python3.8/dist-packages (from scikit-surprise->surprise) (1.2.0)\n","Requirement already satisfied: numpy>=1.17.3 in /usr/local/lib/python3.8/dist-packages (from scikit-surprise->surprise) (1.21.6)\n","Requirement already satisfied: scipy>=1.3.2 in /usr/local/lib/python3.8/dist-packages (from scikit-surprise->surprise) (1.7.3)\n"]}],"source":["!pip install surprise"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"p2Pxd4dXkxzE"},"outputs":[],"source":["from surprise import accuracy\n","\n","from surprise.reader import Reader\n","\n","from surprise.dataset import Dataset\n","\n","from surprise.model_selection import GridSearchCV\n","\n","from surprise.model_selection import train_test_split\n","\n","from surprise.prediction_algorithms.knns import KNNBasic\n","\n","from surprise.prediction_algorithms.matrix_factorization import SVD\n","\n","from surprise.model_selection import KFold\n","\n","from surprise import CoClustering"]},{"cell_type":"markdown","metadata":{"id":"o9Z9L7GWk21n"},"source":["**Some useful functions**\n","\n","Below is the function to calculate precision@k and recall@k, RMSE and F1_Score@k to evaluate the model performance."]},{"cell_type":"markdown","metadata":{"id":"SMLv4r2tk7Jj"},"source":["**Think About It**: Which metric should be used for this problem to compare different models?\n","\n","*   When building a recommendation system that will be implementing different models I do think the F1 score should be used because it will show the mean between the precision and recall. While I do believe that the precision and recall metrics are important in the beginning stages, the F1 score will give a better idea of how its performing while comparing models during this assessment."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"y_D0hx2xlFkF"},"outputs":[],"source":["def precision_recall_at_k(model, k = 30, threshold = 1.5):\n","    \"\"\"Return precision and recall at k metrics for each user\"\"\"\n","\n","    user_est_true = defaultdict(list)\n","    \n","    predictions=model.test(testset)\n","    \n","    for uid, _, true_r, est, _ in predictions:\n","        user_est_true[uid].append((est, true_r))\n","\n","    precisions = dict()\n","    recalls = dict()\n","    for uid, user_ratings in user_est_true.items():\n","\n","        user_ratings.sort(key = lambda x : x[0], reverse = True)\n","\n","        n_rel = sum((true_r >= threshold) for (_, true_r) in user_ratings)\n","\n","        n_rec_k = sum((est >= threshold) for (est, _) in user_ratings[ : k])\n","\n","        n_rel_and_rec_k = sum(((true_r >= threshold) and (est >= threshold))\n","                              for (est, true_r) in user_ratings[ : k])\n","\n","        precisions[uid] = n_rel_and_rec_k / n_rec_k if n_rec_k != 0 else 0\n","\n","        recalls[uid] = n_rel_and_rec_k / n_rel if n_rel != 0 else 0\n","    \n","    precision = round((sum(prec for prec in precisions.values()) / len(precisions)), 3)\n","\n","    recall = round((sum(rec for rec in recalls.values()) / len(recalls)), 3)\n","    \n","    accuracy.rmse(predictions)\n","\n","    print('Precision: ', precision)\n","\n","    print('Recall: ', recall)\n","\n","    print('F_1 score: ', round((2 * precision * recall) / (precision + recall), 3))"]},{"cell_type":"markdown","metadata":{"id":"a9QiB2bHlK3k"},"source":["**Think About It:** In the function precision_recall_at_k above the threshold value used is 1.5. How precision and recall are affected by changing the threshold? What is the intuition behind using the threshold value of 1.5?\n","\n","*   I think it is fair to have the threshold at 1.5 because it allows the model to be reduced so it can locate the 10 best recommendations for the user. Because it tightens things up a bit I do think it could impact the precision and recall but possibly for the better. If it is lower than around 0.6 or so then it could indicate that the recommendation system is not working properly and the threshold number should be changed. Setting the threshold value of 1.5 is a good spot in that it rests somewhere within the average count values and also looking at the past history regarding the play counts of songs."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"qsU750bulSxa"},"outputs":[],"source":["reader = Reader(rating_scale= (0, 5))\n","\n","data = Dataset.load_from_df(df_final[['user_id', 'song_id', 'play_count']], reader)\n","\n","trainset, testset = train_test_split(data, test_size=0.4, random_state = 42)"]},{"cell_type":"markdown","metadata":{"id":"opq6nbHnlXFM"},"source":["**Think About It:** How changing the test size would change the results and outputs?\n","\n","*   I think it would be because a larger portion of your data should be used toward the model and using it for fitting and training. So if there is a higher test size then it is taking away a larger amount of the data that needs to be used for the model training. This in turn could then affect the outputs and results of the data."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"AgepqFOVldpD","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156095633,"user_tz":300,"elapsed":11697,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"b66e4b77-165c-46de-be8c-5bb063849556"},"outputs":[{"output_type":"stream","name":"stdout","text":["RMSE: 1.0672\n","Precision:  0.412\n","Recall:  0.598\n","F_1 score:  0.488\n"]}],"source":["sim_options = {'name': 'msd',\n","               'user_based': True}\n","\n","sim_user_user = KNNBasic(sim_options = sim_options, k = 30, random_state = 1, verbose = False)\n","\n","sim_user_user.fit(trainset)\n","\n","precision_recall_at_k(sim_user_user)"]},{"cell_type":"markdown","metadata":{"id":"3NVX8LUblktA"},"source":["**Observations and Insights:**\n","\n","*   The prescision value looks a little low which at this juncture may indicate that the song recommendations provided are not very relevant.\n","*   The recall value is right at 0.6 which means that relevant songs are being recommended to the user and that the model has the value at a good spot.\n","*   The RMSE is still over 1 and that could be improved so the predicted ratings are closer to the actual ratings. The overall F1 score is still lower than it should be so this could also be improved with a better model from the data."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"EHvktI80l0-3","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156095634,"user_tz":300,"elapsed":10,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"b511a1a8-8add-4100-c7f8-a33a689e6f90"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 1671       r_ui = 2.00   est = 1.63   {'actual_k': 30, 'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=1671, r_ui=2, est=1.6254190211665536, details={'actual_k': 30, 'was_impossible': False})"]},"metadata":{},"execution_count":68}],"source":["sim_user_user.predict(6958, 1671, r_ui = 2, verbose = True)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"IHkduisYl4dq","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671156095635,"user_tz":300,"elapsed":6,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"1230d080-d432-4532-b035-ad5f6afa9b9e"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 3232       r_ui = None   est = 1.36   {'actual_k': 30, 'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=3232, r_ui=None, est=1.3609600600037504, details={'actual_k': 30, 'was_impossible': False})"]},"metadata":{},"execution_count":69}],"source":["sim_user_user.predict(6958, 3232, verbose = True)"]},{"cell_type":"markdown","metadata":{"id":"wJ2e2DmJl8-S"},"source":["**Observations and Insights:**\n","\n","*   Comparing the two samples it looks like the average play count that is predicted for the user with a listened song is considerably higher than the same user that hasn't listened to the particular song. With the actual rating being 2 for the user that has listened to the song, the predicted rating is not too far off but could be improved."]},{"cell_type":"markdown","metadata":{"id":"8QRWMXZSmDdK"},"source":["Now, let's try to tune the model and see if we can improve the model performance."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"AnpQAHjumHRo","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157033340,"user_tz":300,"elapsed":937708,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"fa1815cb-c29d-453d-e273-9384efdd21a2"},"outputs":[{"output_type":"stream","name":"stdout","text":["1.0473120682571855\n"]}],"source":["param_grid = {'k': [10, 20, 30], 'min_k': [3, 6, 9],\n","              'sim_options': {'name': [\"cosine\", 'pearson', \"pearson_baseline\"],\n","                              'user_based': [True], \"min_support\": [2, 4]}\n","              }\n","\n","gs = GridSearchCV(KNNBasic, param_grid, measures = ['rmse'], cv = 3, n_jobs = -1)\n","\n","gs.fit(data)\n","\n","print(gs.best_score['rmse'])"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"wAabxEKKmntP","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157033340,"user_tz":300,"elapsed":7,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"fec6f48b-b6d7-4c98-841e-47928a5bd9b0"},"outputs":[{"output_type":"stream","name":"stdout","text":["{'k': 30, 'min_k': 9, 'sim_options': {'name': 'pearson_baseline', 'user_based': True, 'min_support': 2}}\n"]}],"source":["print(gs.best_params['rmse'])"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Sydcp5wdp-tB","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157044445,"user_tz":300,"elapsed":11108,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"0de71e99-1cfa-4acd-9e04-11f6aa74f5fe"},"outputs":[{"output_type":"stream","name":"stdout","text":["RMSE: 1.0521\n","Precision:  0.413\n","Recall:  0.721\n","F_1 score:  0.525\n"]}],"source":["sim_options = {'name': 'pearson_baseline',\n","               'user_based': True}\n","\n","sim_user_user_optimized = KNNBasic(sim_options = sim_options, k = 30, min_k = 9, random_state = 1, verbose = False)\n","\n","sim_user_user_optimized.fit(trainset)\n","\n","precision_recall_at_k(sim_user_user_optimized)"]},{"cell_type":"markdown","metadata":{"id":"iOvX-Tb0qGAa"},"source":["**Observations and Insights:**\n","\n","*   The noticable change from the metrics was the recall that improved after the hyperparameters were fine tuned. While they were all ready at a good level before the model was tuned, it showed the most improvement.\n","*   The RMSE metric was lowered but not by very much, so it could be a better fit but the fine tuning helped. It should be improved though so the accuracy of the model is better for predictions. The F1 score also improved slightly but mainly from the improvement in the recall value. This is another aspect that could be increased closer to 1 to enhance the accuracy of the model.\n","*   The one metric that stayed pretty much the same after fine tuning was the precision metric which barely improved, so because of this the F1 score did not change very much."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"CaagDu_UqXMY","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157044445,"user_tz":300,"elapsed":17,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"ee058e37-08da-463c-b72a-539f16b7a15e"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 1671       r_ui = 2.00   est = 1.96   {'actual_k': 24, 'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=1671, r_ui=2, est=1.962926073914969, details={'actual_k': 24, 'was_impossible': False})"]},"metadata":{},"execution_count":73}],"source":["sim_user_user_optimized.predict(6958, 1671, r_ui = 2, verbose = True)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"ZQaFt-RVqdG_","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157044446,"user_tz":300,"elapsed":15,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"48bf87d3-2df3-40c4-ec59-7733d366d19f"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 3232       r_ui = None   est = 1.45   {'actual_k': 10, 'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=3232, r_ui=None, est=1.4516261428486725, details={'actual_k': 10, 'was_impossible': False})"]},"metadata":{},"execution_count":74}],"source":["sim_user_user_optimized.predict(6958, 3232, verbose = True)"]},{"cell_type":"markdown","metadata":{"id":"ql-BIi3pqihE"},"source":["**Observations and Insights:**\n","\n","*   After optimizing and fine tuning the predictions the predicted rating for the user that has listened to a particular song (item 1671) increased substantially and is very close to the actual rating of 2. For the user that hasn't listened to a particular song (item 3232), the predicted values also increased from before the fine tuning but not by much.\n","*   The k quantities were lower than 30 for both predictions after the optimizing, possibly meaning that there are less observations that are similar to them."]},{"cell_type":"markdown","metadata":{"id":"CWl5SJymqwtW"},"source":["**Think About It:** Along with making predictions on listened and unknown songs can we get 5 nearest neighbors (most similar) to a certain song?\n","\n","*   I think using the KNN algorithm could potentially be a solution to finding the 5 closest neighbors to a particular song. This way could calculate the distances among those points to determine what is the nearest 5 neighbors to that song in terms of similarity."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"4nv8Hmh8q4kE","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157044446,"user_tz":300,"elapsed":12,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"2710cc0a-4399-49e4-86b4-19c5d46b8cbc"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["[42, 1131, 17, 186, 249]"]},"metadata":{},"execution_count":75}],"source":["sim_user_user_optimized.get_neighbors(0, k = 5)"]},{"cell_type":"markdown","metadata":{"id":"sQBUoRatq9pB"},"source":["Below we will be implementing a function where the input parameters are:\n","\n","**data:** A song dataset\n","\n","**user_id:** A user-id against which we want the recommendations\n","\n","**top_n:** The number of songs we want to recommend\n","\n","**algo:** The algorithm we want to use for predicting the play_count\n","\n","The output of the function is a set of top_n items recommended for the given user_id based on the given algorithm"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"_E5kPbSOrH03"},"outputs":[],"source":["def get_recommendations(data, user_id, top_n, algo):\n","    \n","    recommendations = []\n","    \n","    user_item_interactions_matrix = data.pivot_table(index = 'user_id', columns = 'song_id', values = 'play_count')\n","    \n","    non_interacted_products = user_item_interactions_matrix.loc[user_id][user_item_interactions_matrix.loc[user_id].isnull()].index.tolist()\n","    \n","    for item_id in non_interacted_products:\n","        \n","        est = algo.predict(user_id, item_id).est\n","        \n","        recommendations.append((item_id, est))\n","\n","    recommendations.sort(key = lambda x : x[1], reverse = True)\n","\n","    return recommendations[:top_n]"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"rQ0m3KGHrMXQ"},"outputs":[],"source":["recommendations = get_recommendations(df_final, 6958, 5, sim_user_user_optimized)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"fYPYEADQrP1H","colab":{"base_uri":"https://localhost:8080/","height":206},"executionInfo":{"status":"ok","timestamp":1671157044618,"user_tz":300,"elapsed":4,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"92613267-7c6b-4eab-a760-573a508f1264"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["   song_id  predicted_ratings\n","0     5531           2.553335\n","1      317           2.518269\n","2     4954           2.406776\n","3     8635           2.396606\n","4     5943           2.390723"],"text/html":["\n","  <div id=\"df-09634357-a699-499f-9006-daf336fba5f0\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>song_id</th>\n","      <th>predicted_ratings</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>5531</td>\n","      <td>2.553335</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>317</td>\n","      <td>2.518269</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>4954</td>\n","      <td>2.406776</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>8635</td>\n","      <td>2.396606</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>5943</td>\n","      <td>2.390723</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-09634357-a699-499f-9006-daf336fba5f0')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-09634357-a699-499f-9006-daf336fba5f0 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-09634357-a699-499f-9006-daf336fba5f0');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":78}],"source":["pd.DataFrame(recommendations, columns = ['song_id', 'predicted_ratings'])"]},{"cell_type":"markdown","metadata":{"id":"FklTHif9rUYY"},"source":["**Observations and Insights:**\n","\n","*   The top 5 recommended songs from the new function all have predicted ratings that are well above the threshold of 2 that was used in previous algorithms and models. I believe this is a good sign that this new function is strong with its new predictions and have provided high rated song recommendations to the user."]},{"cell_type":"markdown","metadata":{"id":"0MOrKiaMrbTM"},"source":["**Correcting the play_counts and Ranking the above songs**"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"rI6CvmNurfub"},"outputs":[],"source":["def ranking_songs(recommendations, final_rating):\n","  ranked_songs = final_rating.loc[[items[0] for items in recommendations]].sort_values('play_freq', ascending = False)[['play_freq']].reset_index()\n","\n","  ranked_songs = ranked_songs.merge(pd.DataFrame(recommendations, columns = ['song_id', 'predicted_ratings']), on = 'song_id', how = 'inner')\n","\n","  ranked_songs['corrected_ratings'] = ranked_songs['predicted_ratings'] - 1 / np.sqrt(ranked_songs['play_freq'])\n","\n","  ranked_songs = ranked_songs.sort_values('corrected_ratings', ascending = False)\n","  \n","  return ranked_songs"]},{"cell_type":"markdown","metadata":{"id":"hkejZ8yfrkWr"},"source":["**Think About It:** In the above function to correct the predicted play_count a quantity 1/np.sqrt(n) is subtracted. What is the intuition behind it? Is it also possible to add this quantity instead of subtracting?\n","\n","*   I think the reason behind the quantity being subtracted is that it allows the predicted play counts to have a more realistic and better prediction to the songs. Adding to the quantity might not condense the amount of similar items so that it finds the best recommendations, so perhaps that is the reason that it is better to subtract the quantity."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"YIfbaqqSrrZL","colab":{"base_uri":"https://localhost:8080/","height":206},"executionInfo":{"status":"ok","timestamp":1671157044800,"user_tz":300,"elapsed":185,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"addbe417-98b8-4786-fb9b-e86776ac94ae"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["   song_id  play_freq  predicted_ratings  corrected_ratings\n","0     5531        618           2.553335           2.513109\n","2      317        411           2.518269           2.468943\n","1     5943        423           2.390723           2.342101\n","3     4954        183           2.406776           2.332854\n","4     8635        155           2.396606           2.316284"],"text/html":["\n","  <div id=\"df-72512737-a9c1-4b9c-b419-e87c180ebb54\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>song_id</th>\n","      <th>play_freq</th>\n","      <th>predicted_ratings</th>\n","      <th>corrected_ratings</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>5531</td>\n","      <td>618</td>\n","      <td>2.553335</td>\n","      <td>2.513109</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>317</td>\n","      <td>411</td>\n","      <td>2.518269</td>\n","      <td>2.468943</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>5943</td>\n","      <td>423</td>\n","      <td>2.390723</td>\n","      <td>2.342101</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>4954</td>\n","      <td>183</td>\n","      <td>2.406776</td>\n","      <td>2.332854</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>8635</td>\n","      <td>155</td>\n","      <td>2.396606</td>\n","      <td>2.316284</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-72512737-a9c1-4b9c-b419-e87c180ebb54')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-72512737-a9c1-4b9c-b419-e87c180ebb54 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-72512737-a9c1-4b9c-b419-e87c180ebb54');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":80}],"source":["ranking_songs(recommendations, final_play)"]},{"cell_type":"markdown","metadata":{"id":"NiDDI1tErwr1"},"source":["**Observations and Insights:**\n","\n","*   The rankings of the predicted ratings and corrected ratings for the top 5 are both parallel in that they are ranked in order for each column. What also is relevant here is that the play frequency is also parallel with the ratings in that they are ranked in order like the other columns. This indicates that there is a correlation between how much a song is played and how high the ratings will be for that song. The impact of the user-item interaction then can't be understated and that the play frequency is important to the ratings and makes it more dependable in its predictions."]},{"cell_type":"markdown","metadata":{"id":"G9_ZDIy4r3rr"},"source":["**Item Item Similarity-based collaborative filtering recommendation systems**"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Axf-9aUIr8hH","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157048217,"user_tz":300,"elapsed":3423,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"8e9eca28-9eed-4ca0-8ec1-55fb3739a96a"},"outputs":[{"output_type":"stream","name":"stdout","text":["RMSE: 1.0394\n","Precision:  0.307\n","Recall:  0.562\n","F_1 score:  0.397\n"]}],"source":["sim_options = {'name': 'cosine',\n","               'user_based': False}\n","\n","sim_item_item = KNNBasic(sim_options = sim_options, random_state = 1, verbose = False)\n","\n","sim_item_item.fit(trainset)\n","\n","precision_recall_at_k(sim_item_item)"]},{"cell_type":"markdown","metadata":{"id":"YqAxIqglsC9_"},"source":["**Observations and Insights:**\n","\n","\n","*   After running the model it looks like the precision metric is quite low which is keeping the F1 score much lower than it should be. This must mean that the recommendations provided for the items are not relevant at this point. The recall is a bit lower than it should be which is around 0.6 so improvement is needed here as well where the relevant items recommended could be fine tuned a bit.\n","*   The RMSE metric is over 1 which means that this is another area that can be improved since it is still far from being accurate."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"r1jgsFEmsNR7","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157048218,"user_tz":300,"elapsed":21,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"4fbfef23-5e27-48ea-bd70-7652857b7690"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 1671       r_ui = 2.00   est = 1.36   {'actual_k': 20, 'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=1671, r_ui=2, est=1.3614157231762556, details={'actual_k': 20, 'was_impossible': False})"]},"metadata":{},"execution_count":82}],"source":["sim_item_item.predict(6958, 1671, r_ui = 2, verbose = True)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"utCJvnmCsQ9e","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157048219,"user_tz":300,"elapsed":17,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"5d692bfd-e14e-401b-eaed-08f8ea0fee31"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 3232       item: 1671       r_ui = None   est = 1.70   {'was_impossible': True, 'reason': 'User and/or item is unknown.'}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=3232, iid=1671, r_ui=None, est=1.6989607635206787, details={'was_impossible': True, 'reason': 'User and/or item is unknown.'})"]},"metadata":{},"execution_count":83}],"source":["sim_item_item.predict(3232, 1671, verbose = True)"]},{"cell_type":"markdown","metadata":{"id":"PkWJqnTcsWsl"},"source":["**Observations and Insights:**\n","\n","*   The estimated prediction of 1.36 for the user that has listened to this particular song is much lower than the provided thresold of 2 with the k value being around 20. Maybe this means that with less likely neighbors that this is not a good song to recommend based off the prediction.\n","*   The estimated prediction of 1.70 with the user that has not listend to the particular song is much higher than the listened to song. It is still below the threshold of 2 which means at this point the metrics for recommendations are still not very strong."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"3WmyHkxJsjaC","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157378737,"user_tz":300,"elapsed":330533,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"19905bc5-620d-45eb-cffc-dde2e13ca446"},"outputs":[{"output_type":"stream","name":"stdout","text":["1.024025696240705\n"]}],"source":["param_grid = {'k': [10, 20, 30], 'min_k': [3, 6, 9],\n","              'sim_options': {'name': [\"cosine\", 'pearson', \"pearson_baseline\"],\n","                              'user_based': [False], \"min_support\": [2, 4]}\n","              }\n","\n","gs = GridSearchCV(KNNBasic, param_grid, measures = ['rmse'], cv = 3, n_jobs = -1)\n","\n","gs.fit(data)\n","\n","print(gs.best_score['rmse'])"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"HQXVML4GumHZ","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157378738,"user_tz":300,"elapsed":16,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"bc8b8645-449a-4f7d-d82d-e65b4eb9e09a"},"outputs":[{"output_type":"stream","name":"stdout","text":["{'k': 30, 'min_k': 6, 'sim_options': {'name': 'pearson_baseline', 'user_based': False, 'min_support': 2}}\n"]}],"source":["print(gs.best_params['rmse'])"]},{"cell_type":"markdown","metadata":{"id":"aA_TOJrnus_X"},"source":["**Think About It:** How do the parameters affect the performance of the model? Can we improve the performance of the model further? Check the list of hyperparameters here.\n","\n","*   The usage of the grid search is vital because it will take the hyperparameters listed in the above model and look at all possibilities within those hyperparameters and models to construct a model that will be most beneficial. Perhaps adjusting the values in the parameter grid could be one way of making the model better depending on how the final output looks after entering the data."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Zt-7zFz5u08V","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157382141,"user_tz":300,"elapsed":3413,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"06c36519-5cb8-4403-d670-ad1c9754206a"},"outputs":[{"output_type":"stream","name":"stdout","text":["RMSE: 1.0423\n","Precision:  0.34\n","Recall:  0.563\n","F_1 score:  0.424\n"]}],"source":["sim_options = {'name': 'msd',\n","               'user_based': False}\n","\n","sim_item_item_optimized = KNNBasic(sim_options = sim_options, k = 30, min_k = 6, random_state = 1, verbose = False)\n","\n","sim_item_item_optimized.fit(trainset)\n","\n","precision_recall_at_k(sim_item_item_optimized)"]},{"cell_type":"markdown","metadata":{"id":"s0Zvc0lpu6wF"},"source":["**Observations and Insights:**\n","\n","*   After optimizing the model it looks as though that the tuned hyperparamters did not change the metrics too much. The RMSE metric even regressed and is slightly farther away from being accurate. The precision metric improved more than the other metrics but it was not a significant increase, so it helped improve the F1 score but only slightly because the recall metric stayed roughly the same.\n","*   Overall the accuracy of the metrics is still well below par so the fine tuning of the model did not have much of an effect on the metrics. Maybe going back and revising the parameters in the model could help these values improve."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"W1p3NEA7vIVD","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157382141,"user_tz":300,"elapsed":14,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"370211fd-bd36-44ef-b3dc-223c71d7ab20"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 1671       r_ui = 2.00   est = 1.33   {'actual_k': 20, 'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=1671, r_ui=2, est=1.3319659681769878, details={'actual_k': 20, 'was_impossible': False})"]},"metadata":{},"execution_count":87}],"source":["sim_item_item_optimized.predict(6958, 1671, r_ui = 2, verbose = True)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"wZ1jd88vvMi0","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157382142,"user_tz":300,"elapsed":8,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"680d6b97-9cf8-450a-9059-eb868e47c98b"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 3232       r_ui = None   est = 1.47   {'actual_k': 20, 'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=3232, r_ui=None, est=1.4746440368585654, details={'actual_k': 20, 'was_impossible': False})"]},"metadata":{},"execution_count":88}],"source":["sim_item_item_optimized.predict(6958, 3232, verbose = True)"]},{"cell_type":"markdown","metadata":{"id":"NU0mJ0hovSJw"},"source":["**Observations and Insights:**\n","\n","*   After optimizing the model it looks like both predictions for the user went down and were farther away from the threshold of 2. This is on par with the other outputs after fine tuning the hyperparameters in that they had little impact and even showed signs of regression in some areas. The song that was listened to by the user stayed roughly the same with little regression while the song that was not listened to showed a lot more decline in its estimated rating. Both outputs had actual k values of 20 like the previous model before the optimization."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"FFuOKrTivZOJ","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157382142,"user_tz":300,"elapsed":5,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"23d6fbe9-8439-405f-c56f-90baa7da27aa"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["[3, 10, 24, 30, 36]"]},"metadata":{},"execution_count":89}],"source":["sim_item_item_optimized.get_neighbors(0, k = 5)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"CK3buaO2vd8f"},"outputs":[],"source":["recommendations = get_recommendations(df_final, 6958, 5, sim_item_item_optimized)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"dB0gqtW_vh71","colab":{"base_uri":"https://localhost:8080/","height":206},"executionInfo":{"status":"ok","timestamp":1671157382487,"user_tz":300,"elapsed":9,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"c49605d1-beab-4600-ca71-2742b130fc59"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["   song_id  predicted_play_count\n","0     9942              2.048219\n","1     2842              1.949116\n","2     3050              1.885211\n","3     4939              1.771190\n","4     1691              1.743513"],"text/html":["\n","  <div id=\"df-3e6756de-79d5-48fe-8445-34e4e1f01f21\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>song_id</th>\n","      <th>predicted_play_count</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>9942</td>\n","      <td>2.048219</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>2842</td>\n","      <td>1.949116</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>3050</td>\n","      <td>1.885211</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>4939</td>\n","      <td>1.771190</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>1691</td>\n","      <td>1.743513</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-3e6756de-79d5-48fe-8445-34e4e1f01f21')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-3e6756de-79d5-48fe-8445-34e4e1f01f21 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-3e6756de-79d5-48fe-8445-34e4e1f01f21');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":91}],"source":["pd.DataFrame(recommendations, columns = ['song_id', 'predicted_play_count'])"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"lY0m-bVtvmlh","colab":{"base_uri":"https://localhost:8080/","height":206},"executionInfo":{"status":"ok","timestamp":1671157382487,"user_tz":300,"elapsed":7,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"4e65e162-9b2e-476b-dcf9-10a629513c8a"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["   song_id  play_freq  predicted_ratings  corrected_ratings\n","3     9942        150           2.048219           1.966570\n","2     2842        232           1.949116           1.883463\n","1     3050        233           1.885211           1.819698\n","4     4939        133           1.771190           1.684479\n","0     1691        249           1.743513           1.680140"],"text/html":["\n","  <div id=\"df-7b8b3c21-bd0f-45e5-bfe7-77b820cd0adb\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>song_id</th>\n","      <th>play_freq</th>\n","      <th>predicted_ratings</th>\n","      <th>corrected_ratings</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>3</th>\n","      <td>9942</td>\n","      <td>150</td>\n","      <td>2.048219</td>\n","      <td>1.966570</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>2842</td>\n","      <td>232</td>\n","      <td>1.949116</td>\n","      <td>1.883463</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>3050</td>\n","      <td>233</td>\n","      <td>1.885211</td>\n","      <td>1.819698</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>4939</td>\n","      <td>133</td>\n","      <td>1.771190</td>\n","      <td>1.684479</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>1691</td>\n","      <td>249</td>\n","      <td>1.743513</td>\n","      <td>1.680140</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-7b8b3c21-bd0f-45e5-bfe7-77b820cd0adb')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-7b8b3c21-bd0f-45e5-bfe7-77b820cd0adb button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-7b8b3c21-bd0f-45e5-bfe7-77b820cd0adb');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":92}],"source":["ranking_songs(recommendations, final_play)"]},{"cell_type":"markdown","metadata":{"id":"QzFYi_GZvsLb"},"source":["**Observations and Insights:**\n","\n","*   From the 5 selected neighbors provided the model recommended 5 songs that are all above or at least somewhat close to the threshold of 2. The play frequencies for the songs are all high enough to show that this is a fairly reliable prediction for the 5 songs. The corrected ratings are all pretty close to the predicted ratings, so this shows that this is also a good model for recommending songs if you are looking simply at the closest neighbors to the user."]},{"cell_type":"markdown","metadata":{"id":"Y8Q5LYqCvzXE"},"source":["**Model Based Collaborative Filtering - Matrix Factorization**\n","\n","Model-based Collaborative Filtering is a personalized recommendation system, the recommendations are based on the past behavior of the user and it is not dependent on any additional information. We use latent features to find recommendations for each user."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"m89nl1f0v345","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157384221,"user_tz":300,"elapsed":1740,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"4d206fd6-26c7-4f70-814c-65eec6d18d04"},"outputs":[{"output_type":"stream","name":"stdout","text":["RMSE: 1.0252\n","Precision:  0.41\n","Recall:  0.633\n","F_1 score:  0.498\n"]}],"source":["svd = SVD(random_state = 1)\n","\n","svd.fit(trainset)\n","\n","precision_recall_at_k(svd)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"kkG9XUNVv8WZ","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157384222,"user_tz":300,"elapsed":9,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"7e416f1c-a7dc-4624-d077-1e325338e6d0"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 1671       r_ui = 2.00   est = 1.27   {'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=1671, r_ui=2, est=1.267473397214638, details={'was_impossible': False})"]},"metadata":{},"execution_count":94}],"source":["svd.predict(6958, 1671, r_ui = 2, verbose = True)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"7xIWEaxXwA7Y","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157384222,"user_tz":300,"elapsed":6,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"7906648c-67f9-41fb-ad72-636a211791ae"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 3232       r_ui = None   est = 1.56   {'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=3232, r_ui=None, est=1.5561675084403663, details={'was_impossible': False})"]},"metadata":{},"execution_count":95}],"source":["svd.predict(6958, 3232, verbose = True)"]},{"cell_type":"markdown","metadata":{"id":"XMU6IZC4wHCA"},"source":["**Improving matrix factorization based recommendation system by tuning its hyperparameters**"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"F33zoqjtwL4Y","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157471314,"user_tz":300,"elapsed":87094,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"b505b39f-c975-4e3d-afa4-6d84f3589a7c"},"outputs":[{"output_type":"stream","name":"stdout","text":["1.0121087151082329\n"]}],"source":["param_grid = {'n_epochs': [10, 20, 30], 'lr_all': [0.001, 0.005, 0.01],\n","              'reg_all': [0.2, 0.4, 0.6]}\n","\n","gs = GridSearchCV(SVD, param_grid, measures = ['rmse'], cv = 3, n_jobs = -1)\n","\n","gs.fit(data)\n","\n","print(gs.best_score['rmse'])"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"hgL-IQLLwQVH","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157471315,"user_tz":300,"elapsed":8,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"6608a3ef-967d-423f-84a7-e008771b80bb"},"outputs":[{"output_type":"stream","name":"stdout","text":["{'n_epochs': 30, 'lr_all': 0.01, 'reg_all': 0.2}\n"]}],"source":["print(gs.best_params['rmse'])"]},{"cell_type":"markdown","metadata":{"id":"RDOsExa9wjK7"},"source":["**Think About It:** How do the parameters affect the performance of the model? Can we improve the performance of the model further? Check the available hyperparameters here.\n","\n","*   The parameters that they are all set at it looks like it has improved the metrics considerly in most areas. The F1 score has improved but is still below where it should be, while the RMSE metric has been lowered but only slightly. The prediction value for the user that has listened to a particular song is the only noticeable regression. None of the parameters that are being used are near the default options, so perhaps using those values might be a better method to see how the model has affected the outputs."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"s5l3qeHRwraq","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157473732,"user_tz":300,"elapsed":2420,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"506b919d-cb73-4f6f-bf47-a47af374ba58"},"outputs":[{"output_type":"stream","name":"stdout","text":["RMSE: 1.0141\n","Precision:  0.415\n","Recall:  0.635\n","F_1 score:  0.502\n"]}],"source":["svd_optimized = SVD(n_epochs = 30, lr_all = 0.01, reg_all = 0.2, random_state = 1)\n","\n","svd_optimized = svd_optimized.fit(trainset)\n","\n","precision_recall_at_k(svd_optimized)"]},{"cell_type":"markdown","metadata":{"id":"5mJaFnAwwv5D"},"source":["**Observations and Insights:**\n","\n","*   Using the best possible parameters from the grid search it has shown to have made the metrics better in all four areas. Maybe using the default options would have not made the model better and that this is the best model for future recommendations after through all the possible iterations. It has pushed the F1 score closer to 0.6 which will make this a more reliable model."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Czy40E0fw2s5","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157473732,"user_tz":300,"elapsed":7,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"2057a830-cefa-44cd-ceb1-338c8fd233fe"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 1671       r_ui = 2.00   est = 1.34   {'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=1671, r_ui=2, est=1.3432395286125096, details={'was_impossible': False})"]},"metadata":{},"execution_count":99}],"source":["svd_optimized.predict(6958, 1671, r_ui = 2, verbose = True)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"E_yrrvANw8Bt","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157473733,"user_tz":300,"elapsed":6,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"6f9ed41a-1ba2-428b-83f6-269f4e1d0906"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 3232       r_ui = None   est = 1.44   {'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=3232, r_ui=None, est=1.442548446117648, details={'was_impossible': False})"]},"metadata":{},"execution_count":100}],"source":["svd_optimized.predict(6958, 3232, verbose = True)"]},{"cell_type":"markdown","metadata":{"id":"F1MsS735xBCB"},"source":["**Observations and Insights:**\n","\n","*   The optimized hyperparameters increased the estimated value by a small amount with using 2 still as a threshold with a particular song that the user has listened to. The song that the user has not listend to has a estimated value that decreased after fine tuning the hyperparameters. I do wonder if this process that uses latent features is affecting the values after tuning the hyperparameters or any regression is more of an aberration."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"V_7ynRkXxIBl"},"outputs":[],"source":["svd_recommendations = get_recommendations(df_final, 6958, 5, svd_optimized)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"2xr6SxH4xLq5","colab":{"base_uri":"https://localhost:8080/","height":206},"executionInfo":{"status":"ok","timestamp":1671157473951,"user_tz":300,"elapsed":6,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"ad9f9f79-a674-4a4c-f22e-b99fdb9b5b8b"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["   song_id  play_freq  predicted_ratings  corrected_ratings\n","2     7224        107           2.601899           2.505225\n","1     5653        108           2.108728           2.012502\n","4     8324         96           2.014091           1.912029\n","0     9942        150           1.940115           1.858465\n","3     6450        102           1.952493           1.853478"],"text/html":["\n","  <div id=\"df-4118f3a7-1787-42cc-b561-9036a29bbaec\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>song_id</th>\n","      <th>play_freq</th>\n","      <th>predicted_ratings</th>\n","      <th>corrected_ratings</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>2</th>\n","      <td>7224</td>\n","      <td>107</td>\n","      <td>2.601899</td>\n","      <td>2.505225</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>5653</td>\n","      <td>108</td>\n","      <td>2.108728</td>\n","      <td>2.012502</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>8324</td>\n","      <td>96</td>\n","      <td>2.014091</td>\n","      <td>1.912029</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>9942</td>\n","      <td>150</td>\n","      <td>1.940115</td>\n","      <td>1.858465</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>6450</td>\n","      <td>102</td>\n","      <td>1.952493</td>\n","      <td>1.853478</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-4118f3a7-1787-42cc-b561-9036a29bbaec')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-4118f3a7-1787-42cc-b561-9036a29bbaec button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-4118f3a7-1787-42cc-b561-9036a29bbaec');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":102}],"source":["ranking_songs(svd_recommendations, final_play)"]},{"cell_type":"markdown","metadata":{"id":"onMjIWUWxRVW"},"source":["**Observations and Insights:**\n","\n","*   The tuned hyperparameters have I think changed the model for the better, with the top 5 song recommendations having higher ratings in both columns. They are all a lot closer to the 2 threshold with all the songs ratings being above or just below that threshold value. The difference between the predicted and corrected ratings look about the same after the model was tuned. All the songs have high enough play frequencies that this recommendation model looks stronger."]},{"cell_type":"markdown","metadata":{"id":"OMyM-8VexVby"},"source":["**Cluster Based Recommendation System**\n","\n","In clustering-based recommendation systems, we explore the similarities and differences in people's tastes in songs based on how they rate different songs. We cluster similar users together and recommend songs to a user based on play_counts from other users in the same cluster."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"5Xcllhsjxciq","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157476735,"user_tz":300,"elapsed":2788,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"1dabe3da-da57-4a84-8147-26077638dfea"},"outputs":[{"output_type":"stream","name":"stdout","text":["RMSE: 1.0487\n","Precision:  0.397\n","Recall:  0.582\n","F_1 score:  0.472\n"]}],"source":["clust_baseline = CoClustering(random_state = 1)\n","\n","clust_baseline.fit(trainset)\n","\n","precision_recall_at_k(clust_baseline)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"5eN4A5Mtxh28","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157476736,"user_tz":300,"elapsed":9,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"d1363e2a-d8d3-4a31-b83a-bb2895c4ef78"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 1671       r_ui = 2.00   est = 1.29   {'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=1671, r_ui=2, est=1.2941824757363074, details={'was_impossible': False})"]},"metadata":{},"execution_count":104}],"source":["clust_baseline.predict(6958, 1671, r_ui = 2, verbose = True)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"hgWEJD0hxxZ1","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157476736,"user_tz":300,"elapsed":8,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"bdc9e8d0-19c8-49ed-f777-0b9f31e77ada"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 3232       r_ui = None   est = 1.48   {'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=3232, r_ui=None, est=1.4785259100797417, details={'was_impossible': False})"]},"metadata":{},"execution_count":105}],"source":["clust_baseline.predict(6958, 3232, verbose = True)"]},{"cell_type":"markdown","metadata":{"id":"HRuPw58Lx1zk"},"source":["**Improving clustering-based recommendation system by tuning its hyper-parameters**"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"NTeOCyqwx-Wz","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157684355,"user_tz":300,"elapsed":207622,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"274b0c2e-237c-4dce-a91e-5b149be9b230"},"outputs":[{"output_type":"stream","name":"stdout","text":["1.061515101753293\n"]}],"source":["param_grid = {'n_cltr_u': [5, 6, 7, 8], 'n_cltr_i': [5, 6, 7, 8], 'n_epochs': [10, 20, 30]}\n","\n","gs = GridSearchCV(CoClustering, param_grid, measures = ['rmse'], cv = 3, n_jobs = -1)\n","\n","gs.fit(data)\n","\n","print(gs.best_score['rmse'])"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"lBjYjtryzbkB","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157684355,"user_tz":300,"elapsed":21,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"319f63e0-d0a9-4322-ccc5-eea560f9196f"},"outputs":[{"output_type":"stream","name":"stdout","text":["{'n_cltr_u': 5, 'n_cltr_i': 5, 'n_epochs': 10}\n"]}],"source":["print(gs.best_params['rmse'])"]},{"cell_type":"markdown","metadata":{"id":"LC7-yqeQXZ1L"},"source":["**Think About It:** How do the parameters affect the performance of the model? Can we improve the performance of the model further? Check the available hyperparameters here.\n","\n","*   I think that having less clusters for the items and users will benefit the recommendation system in that it will make it easier to recommend items and help find users that are similar. Having too many clusters I wonder could make things too complicated for the recommendation system and would require too many iterations of the optimization loop."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"NAvrIY0EcNwf","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157687638,"user_tz":300,"elapsed":3296,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"92a63e7e-a14c-466a-acb7-7918d7e6476c"},"outputs":[{"output_type":"stream","name":"stdout","text":["RMSE: 1.0487\n","Precision:  0.397\n","Recall:  0.582\n","F_1 score:  0.472\n"]}],"source":["clust_tuned = CoClustering(n_cltr_u = 3, n_cltr_i = 3, n_epochs = 30, random_state = 1)\n","\n","clust_tuned.fit(trainset)\n","\n","precision_recall_at_k(clust_tuned)"]},{"cell_type":"markdown","metadata":{"id":"VD_7wZAbdrMe"},"source":["**Observations and Insights:**\n","\n","*   Condensing the total number of clusters to the default values of 3 after the tuning, the F1 score is below average with the recall being close to average and the precision being relatively low. The RMSE metric is around 1 which is a bit high but isn't too far off from other past models that have been implemented. I wonder if more clusters would help these metrics scores at all."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"gy5sdxlHfNwL","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157687639,"user_tz":300,"elapsed":9,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"d98c793a-73ff-4cd6-890a-5d8aad746e5a"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 1671       r_ui = 2.00   est = 1.29   {'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=1671, r_ui=2, est=1.2941824757363074, details={'was_impossible': False})"]},"metadata":{},"execution_count":109}],"source":["clust_tuned.predict(6958, 1671, r_ui = 2, verbose = True)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"-m6MoEbfgNuq","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157687640,"user_tz":300,"elapsed":6,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"534f9f8a-f965-4aaa-ac9f-da312ae6639b"},"outputs":[{"output_type":"stream","name":"stdout","text":["user: 6958       item: 3232       r_ui = None   est = 1.48   {'was_impossible': False}\n"]},{"output_type":"execute_result","data":{"text/plain":["Prediction(uid=6958, iid=3232, r_ui=None, est=1.4785259100797417, details={'was_impossible': False})"]},"metadata":{},"execution_count":110}],"source":["clust_tuned.predict(6958, 3232, verbose = True)"]},{"cell_type":"markdown","metadata":{"id":"MBtoaCcUk3eL"},"source":["**Observations and Insights:**\n","\n","*   It looks as though the clusters have made the estimated values for both predictions with the user-song interaction a bit below average. The cluster with the user having not listened to the particular song is definitely higher than the song that the user has listened to using the threshold of 2. This seems to be not too much of a surprise with the metrics being below average overall as well. There is definitely some room for improvements regarding the fine tuning of the hyperparameters with the clustering."]},{"cell_type":"markdown","metadata":{"id":"_U0dacOEk-TH"},"source":["**Implementing the recommendation algorithm based on optimized CoClustering model**"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"2B3Xh4OrlDJ_"},"outputs":[],"source":["def get_recommendations(data, user_id, top_n, algo):\n","\n","    recommendations = []\n","    \n","    user_item_interactions_matrix = data.pivot(index = 'user_id', columns = 'song_id', values = 'play_count')\n","    \n","    non_interacted_products = user_item_interactions_matrix.loc[user_id][user_item_interactions_matrix.loc[user_id].isnull()].index.tolist()\n","    \n","    for item_id in non_interacted_products:\n","        \n","        est = algo.predict(user_id, item_id).est\n","        \n","        recommendations.append((item_id, est))\n","\n","    recommendations.sort(key = lambda x: x[1], reverse = True)\n","\n","    return recommendations[:top_n]"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"zvrd3b3SlHi6"},"outputs":[],"source":["clustering_recommendations = get_recommendations(df_final, 6958, 5, clust_tuned)"]},{"cell_type":"markdown","metadata":{"id":"CZEjJIlrlMoa"},"source":["**Correcting the play_count and Ranking the above songs**"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"BNRadzKllRkl"},"outputs":[],"source":["def ranking_songs(recommendations, final_rating):\n","  \n","    ranked_songs = final_play.loc[[items[0] for items in recommendations]].sort_values('play_freq', ascending = False)[['play_freq']].reset_index()\n","\n","    ranked_songs = ranked_songs.merge(pd.DataFrame(recommendations, columns = ['song_id', 'predicted_ratings']), on = 'song_id', how = 'inner')\n","\n","    ranked_songs['corrected_ratings'] = ranked_songs['predicted_ratings'] - 1 / np.sqrt(ranked_songs['play_freq'])\n","\n","    ranked_songs = ranked_songs.sort_values('corrected_ratings', ascending = False)\n","\n","    return ranked_songs"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"N1J73KCblVxE","colab":{"base_uri":"https://localhost:8080/","height":206},"executionInfo":{"status":"ok","timestamp":1671157687947,"user_tz":300,"elapsed":8,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"bb6701b3-ecf4-4430-96ba-54998ee55b8d"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["   song_id  play_freq  predicted_ratings  corrected_ratings\n","2     7224        107           3.094797           2.998124\n","4     8324         96           2.311498           2.209436\n","1     9942        150           2.215039           2.133390\n","0     5531        618           2.124563           2.084337\n","3     4831         97           2.123783           2.022248"],"text/html":["\n","  <div id=\"df-eb1f3d41-98f2-4633-bf0b-2fbbf354bdcf\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>song_id</th>\n","      <th>play_freq</th>\n","      <th>predicted_ratings</th>\n","      <th>corrected_ratings</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>2</th>\n","      <td>7224</td>\n","      <td>107</td>\n","      <td>3.094797</td>\n","      <td>2.998124</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>8324</td>\n","      <td>96</td>\n","      <td>2.311498</td>\n","      <td>2.209436</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>9942</td>\n","      <td>150</td>\n","      <td>2.215039</td>\n","      <td>2.133390</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>5531</td>\n","      <td>618</td>\n","      <td>2.124563</td>\n","      <td>2.084337</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>4831</td>\n","      <td>97</td>\n","      <td>2.123783</td>\n","      <td>2.022248</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-eb1f3d41-98f2-4633-bf0b-2fbbf354bdcf')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-eb1f3d41-98f2-4633-bf0b-2fbbf354bdcf button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-eb1f3d41-98f2-4633-bf0b-2fbbf354bdcf');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":114}],"source":["ranking_songs(clustering_recommendations, final_play)"]},{"cell_type":"markdown","metadata":{"id":"wp6UjjPMlcSI"},"source":["**Observations and Insights:**\n","\n","*   After going through the extraction and finding the songs that have not been interacted with, it looks like the ratings for these songs are even higher than past models. The clustering method then makes me wonder if this is a better way to help find songs for users in the recommendation system stemming from the results. The top 5 recommended songs also have high play frequencies, so I feel more comfortable using this model then the other models used as of right now."]},{"cell_type":"markdown","metadata":{"id":"TwOEbmENllOv"},"source":["**Content Based Recommendation Systems**\n","\n","**Think About It:** So far we have only used the play_count of songs to find recommendations but we have other information/features on songs as well. Can we take those song features into account?\n","\n","*   I do think that other aspects of these songs can be used toward building a stronger recommendation system. If we know the genre of music or even the year of the album release then I think that can help identify user interests and that in turn can find similar users which can help recommend songs that the user would more likely listen to. The only part of this that could possibly hinder the best recommendation system regarding song information would be if any of those features are missing."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"cIl6MR8zluZU"},"outputs":[],"source":["df_small = df_final"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"h8juDBrHlzTr","colab":{"base_uri":"https://localhost:8080/","height":320},"executionInfo":{"status":"ok","timestamp":1671157687948,"user_tz":300,"elapsed":8,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"e7971d86-fe4d-4c88-9885-f948e28510d9"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["   Unnamed: 0  user_id  song_id  play_count                            title  \\\n","0         200     6958      447           1               Daisy And Prudence   \n","1         202     6958      512           1  The Ballad of Michael Valentine   \n","2         203     6958      549           1        I Stand Corrected (Album)   \n","3         204     6958      703           1            They Might Follow You   \n","4         205     6958      719           1                       Monkey Man   \n","\n","                release      artist_name  year  \\\n","0          Distillation     Erin McKeown  2000   \n","1               Sawdust      The Killers  2004   \n","2       Vampire Weekend  Vampire Weekend  2007   \n","3           Tiny Vipers      Tiny Vipers  2007   \n","4  You Know I'm No Good    Amy Winehouse  2007   \n","\n","                                                text  \n","0       Daisy And Prudence Distillation Erin McKeown  \n","1  The Ballad of Michael Valentine Sawdust The Ki...  \n","2  I Stand Corrected (Album) Vampire Weekend Vamp...  \n","3      They Might Follow You Tiny Vipers Tiny Vipers  \n","4      Monkey Man You Know I'm No Good Amy Winehouse  "],"text/html":["\n","  <div id=\"df-d97e8e55-cebe-4776-815d-47044d18d9e8\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>Unnamed: 0</th>\n","      <th>user_id</th>\n","      <th>song_id</th>\n","      <th>play_count</th>\n","      <th>title</th>\n","      <th>release</th>\n","      <th>artist_name</th>\n","      <th>year</th>\n","      <th>text</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>200</td>\n","      <td>6958</td>\n","      <td>447</td>\n","      <td>1</td>\n","      <td>Daisy And Prudence</td>\n","      <td>Distillation</td>\n","      <td>Erin McKeown</td>\n","      <td>2000</td>\n","      <td>Daisy And Prudence Distillation Erin McKeown</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>202</td>\n","      <td>6958</td>\n","      <td>512</td>\n","      <td>1</td>\n","      <td>The Ballad of Michael Valentine</td>\n","      <td>Sawdust</td>\n","      <td>The Killers</td>\n","      <td>2004</td>\n","      <td>The Ballad of Michael Valentine Sawdust The Ki...</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>203</td>\n","      <td>6958</td>\n","      <td>549</td>\n","      <td>1</td>\n","      <td>I Stand Corrected (Album)</td>\n","      <td>Vampire Weekend</td>\n","      <td>Vampire Weekend</td>\n","      <td>2007</td>\n","      <td>I Stand Corrected (Album) Vampire Weekend Vamp...</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>204</td>\n","      <td>6958</td>\n","      <td>703</td>\n","      <td>1</td>\n","      <td>They Might Follow You</td>\n","      <td>Tiny Vipers</td>\n","      <td>Tiny Vipers</td>\n","      <td>2007</td>\n","      <td>They Might Follow You Tiny Vipers Tiny Vipers</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>205</td>\n","      <td>6958</td>\n","      <td>719</td>\n","      <td>1</td>\n","      <td>Monkey Man</td>\n","      <td>You Know I'm No Good</td>\n","      <td>Amy Winehouse</td>\n","      <td>2007</td>\n","      <td>Monkey Man You Know I'm No Good Amy Winehouse</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-d97e8e55-cebe-4776-815d-47044d18d9e8')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-d97e8e55-cebe-4776-815d-47044d18d9e8 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-d97e8e55-cebe-4776-815d-47044d18d9e8');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":116}],"source":["df_small['text'] = df_small['title'] + ' ' + df_small['release'] + ' ' + df_small['artist_name']\n","\n","df_small.head()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"8WHwWPiTl7c8","colab":{"base_uri":"https://localhost:8080/","height":237},"executionInfo":{"status":"ok","timestamp":1671157688334,"user_tz":300,"elapsed":393,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"01c081d4-05a7-49ca-950b-ee9eb9a04e94"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["                                 user_id  song_id  play_count  \\\n","title                                                           \n","Daisy And Prudence                  6958      447           1   \n","The Ballad of Michael Valentine     6958      512           1   \n","I Stand Corrected (Album)           6958      549           1   \n","They Might Follow You               6958      703           1   \n","Monkey Man                          6958      719           1   \n","\n","                                                                              text  \n","title                                                                               \n","Daisy And Prudence                    Daisy And Prudence Distillation Erin McKeown  \n","The Ballad of Michael Valentine  The Ballad of Michael Valentine Sawdust The Ki...  \n","I Stand Corrected (Album)        I Stand Corrected (Album) Vampire Weekend Vamp...  \n","They Might Follow You                They Might Follow You Tiny Vipers Tiny Vipers  \n","Monkey Man                           Monkey Man You Know I'm No Good Amy Winehouse  "],"text/html":["\n","  <div id=\"df-3e4fa8cf-5e74-49d4-9d52-4b745a103411\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>user_id</th>\n","      <th>song_id</th>\n","      <th>play_count</th>\n","      <th>text</th>\n","    </tr>\n","    <tr>\n","      <th>title</th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","      <th></th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>Daisy And Prudence</th>\n","      <td>6958</td>\n","      <td>447</td>\n","      <td>1</td>\n","      <td>Daisy And Prudence Distillation Erin McKeown</td>\n","    </tr>\n","    <tr>\n","      <th>The Ballad of Michael Valentine</th>\n","      <td>6958</td>\n","      <td>512</td>\n","      <td>1</td>\n","      <td>The Ballad of Michael Valentine Sawdust The Ki...</td>\n","    </tr>\n","    <tr>\n","      <th>I Stand Corrected (Album)</th>\n","      <td>6958</td>\n","      <td>549</td>\n","      <td>1</td>\n","      <td>I Stand Corrected (Album) Vampire Weekend Vamp...</td>\n","    </tr>\n","    <tr>\n","      <th>They Might Follow You</th>\n","      <td>6958</td>\n","      <td>703</td>\n","      <td>1</td>\n","      <td>They Might Follow You Tiny Vipers Tiny Vipers</td>\n","    </tr>\n","    <tr>\n","      <th>Monkey Man</th>\n","      <td>6958</td>\n","      <td>719</td>\n","      <td>1</td>\n","      <td>Monkey Man You Know I'm No Good Amy Winehouse</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-3e4fa8cf-5e74-49d4-9d52-4b745a103411')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-3e4fa8cf-5e74-49d4-9d52-4b745a103411 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-3e4fa8cf-5e74-49d4-9d52-4b745a103411');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":117}],"source":["df_small = df_small[['user_id', 'song_id', 'play_count', 'title', 'text']]\n","\n","df_small = df_small.drop_duplicates(subset = ['title'])\n","\n","df_small = df_small.set_index('title')\n","\n","df_small.head(5)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"TF28WgexmD4S","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157688334,"user_tz":300,"elapsed":12,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"e0e6a680-5336-4d94-826e-62cadc2757f0"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["(561, 4)"]},"metadata":{},"execution_count":118}],"source":["df_small.shape"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"FXrE_HLjmHTy","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157688335,"user_tz":300,"elapsed":6,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"ba2ca5a1-aeb9-4c28-fc69-2e1fb7043db3"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["0                 Daisy And Prudence\n","1    The Ballad of Michael Valentine\n","2          I Stand Corrected (Album)\n","3              They Might Follow You\n","4                         Monkey Man\n","Name: title, dtype: object"]},"metadata":{},"execution_count":119}],"source":["indices = pd.Series(df_small.index)\n","\n","indices[ : 5]"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Uny28HZJmNVg","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157688987,"user_tz":300,"elapsed":655,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"09b4a816-5c03-4297-f020-b22f5de9d8ba"},"outputs":[{"output_type":"stream","name":"stderr","text":["[nltk_data] Downloading package punkt to /root/nltk_data...\n","[nltk_data]   Package punkt is already up-to-date!\n","[nltk_data] Downloading package stopwords to /root/nltk_data...\n","[nltk_data]   Package stopwords is already up-to-date!\n","[nltk_data] Downloading package wordnet to /root/nltk_data...\n","[nltk_data]   Package wordnet is already up-to-date!\n","[nltk_data] Downloading package omw-1.4 to /root/nltk_data...\n","[nltk_data]   Package omw-1.4 is already up-to-date!\n"]},{"output_type":"execute_result","data":{"text/plain":["True"]},"metadata":{},"execution_count":120}],"source":["import nltk\n","\n","nltk.download(\"punkt\")\n","\n","nltk.download(\"stopwords\")\n"," \n","nltk.download(\"wordnet\")\n","\n","import re\n","\n","from nltk import word_tokenize\n","\n","from nltk.stem import WordNetLemmatizer\n","\n","from nltk.corpus import stopwords\n","\n","from sklearn.feature_extraction.text import CountVectorizer, TfidfVectorizer\n","\n","import nltk\n","\n","nltk.download('omw-1.4')"]},{"cell_type":"markdown","metadata":{"id":"5SDxLXMkmUEj"},"source":["**We will create a function to pre-process the text data:**"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"B8xQuVBbma0N"},"outputs":[],"source":["def tokenize(text):\n","    \n","    text = re.sub(r\"[^a-zA-Z]\",\" \", text.lower())\n","    \n","    tokens = word_tokenize(text)\n","    \n","    words = [word for word in tokens if word not in stopwords.words(\"english\")] \n","    \n","    text_lems = [WordNetLemmatizer().lemmatize(lem).strip() for lem in words]\n","\n","    return text_lems"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"eRPvK5PYmg9-"},"outputs":[],"source":["tfidf = TfidfVectorizer(tokenizer = tokenize)\n","\n","song_tfidf = tfidf.fit_transform(df_small['text'].values).toarray()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"gsmUNT-kmnGa","colab":{"base_uri":"https://localhost:8080/","height":424},"executionInfo":{"status":"ok","timestamp":1671157691745,"user_tz":300,"elapsed":25,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"1234d059-7e59-4cd2-cedb-19b895a08403"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["     0     1     2     3     4     5     6     7     8     9     ...  1427  \\\n","0     0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  ...   0.0   \n","1     0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  ...   0.0   \n","2     0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  ...   0.0   \n","3     0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  ...   0.0   \n","4     0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  ...   0.0   \n","..    ...   ...   ...   ...   ...   ...   ...   ...   ...   ...  ...   ...   \n","556   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  ...   0.0   \n","557   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  ...   0.0   \n","558   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  ...   0.0   \n","559   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  ...   0.0   \n","560   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  ...   0.0   \n","\n","     1428  1429  1430  1431  1432  1433  1434  1435  1436  \n","0     0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  \n","1     0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  \n","2     0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  \n","3     0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  \n","4     0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  \n","..    ...   ...   ...   ...   ...   ...   ...   ...   ...  \n","556   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  \n","557   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  \n","558   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  \n","559   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  \n","560   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0  \n","\n","[561 rows x 1437 columns]"],"text/html":["\n","  <div id=\"df-9122ba53-63a6-41d7-91d8-19c8403f04d7\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>0</th>\n","      <th>1</th>\n","      <th>2</th>\n","      <th>3</th>\n","      <th>4</th>\n","      <th>5</th>\n","      <th>6</th>\n","      <th>7</th>\n","      <th>8</th>\n","      <th>9</th>\n","      <th>...</th>\n","      <th>1427</th>\n","      <th>1428</th>\n","      <th>1429</th>\n","      <th>1430</th>\n","      <th>1431</th>\n","      <th>1432</th>\n","      <th>1433</th>\n","      <th>1434</th>\n","      <th>1435</th>\n","      <th>1436</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>...</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>...</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>...</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>...</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>...</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","    </tr>\n","    <tr>\n","      <th>...</th>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","    </tr>\n","    <tr>\n","      <th>556</th>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>...</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","    </tr>\n","    <tr>\n","      <th>557</th>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>...</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","    </tr>\n","    <tr>\n","      <th>558</th>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>...</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","    </tr>\n","    <tr>\n","      <th>559</th>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>...</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","    </tr>\n","    <tr>\n","      <th>560</th>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>...</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","      <td>0.0</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>561 rows × 1437 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-9122ba53-63a6-41d7-91d8-19c8403f04d7')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-9122ba53-63a6-41d7-91d8-19c8403f04d7 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-9122ba53-63a6-41d7-91d8-19c8403f04d7');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":123}],"source":["pd.DataFrame(song_tfidf)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"TLjuDB8Ems38","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157691747,"user_tz":300,"elapsed":25,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"b1a5b81d-0b01-4b80-92c1-acdfd2da3838"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["array([[1., 0., 0., ..., 0., 0., 0.],\n","       [0., 1., 0., ..., 0., 0., 0.],\n","       [0., 0., 1., ..., 0., 0., 0.],\n","       ...,\n","       [0., 0., 0., ..., 1., 0., 0.],\n","       [0., 0., 0., ..., 0., 1., 0.],\n","       [0., 0., 0., ..., 0., 0., 1.]])"]},"metadata":{},"execution_count":124}],"source":["similar_songs = cosine_similarity(song_tfidf, song_tfidf)\n","\n","similar_songs"]},{"cell_type":"markdown","metadata":{"id":"YHQKbnKgmyu0"},"source":["Finally, let's create a function to find most similar songs to recommend for a given song."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"v4UzLI8um3Dl"},"outputs":[],"source":["def recommendations(title, similar_songs):\n","    \n","    recommended_songs = []\n","    \n","    idx = indices[indices == title].index[0]\n","\n","    score_series = pd.Series(similar_songs[idx]).sort_values(ascending = False)\n","\n","    top_10_indexes = list(score_series.iloc[1 : 11].index)\n","    print(top_10_indexes)\n","    \n","    for i in top_10_indexes:\n","        recommended_songs.append(list(df_small.index)[i])\n","        \n","    return recommended_songs"]},{"cell_type":"markdown","metadata":{"id":"jz4PLCOtm7b5"},"source":["Recommending 10 songs similar to Learn To Fly"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Qzb65ax2nA8B","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1671157691753,"user_tz":300,"elapsed":27,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"ab01f15f-34bc-4b89-9e22-578a08512b6e"},"outputs":[{"output_type":"stream","name":"stdout","text":["[509, 234, 423, 345, 394, 370, 371, 372, 373, 375]\n"]},{"output_type":"execute_result","data":{"text/plain":["['Everlong',\n"," 'The Pretender',\n"," 'Nothing Better (Album)',\n"," 'From Left To Right',\n"," 'Lifespan Of A Fly',\n"," 'Under The Gun',\n"," 'I Need A Dollar',\n"," 'Feel The Love',\n"," 'All The Pretty Faces',\n"," 'Bones']"]},"metadata":{},"execution_count":126}],"source":["recommendations('Learn To Fly', similar_songs)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Ziew6pn1KsXP","colab":{"base_uri":"https://localhost:8080/","height":468},"executionInfo":{"status":"ok","timestamp":1671157691956,"user_tz":300,"elapsed":227,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"7372278f-c1ad-4005-d102-fe0a1e1b0a11"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["        Unnamed: 0  user_id  song_id  play_count         title  \\\n","676           8275    75901     1188           2  Learn To Fly   \n","1369         19706     9097     1188           1  Learn To Fly   \n","1535         20895    19193     1188           1  Learn To Fly   \n","2171         31768    26149     1188           2  Learn To Fly   \n","3315         54773    35737     1188           1  Learn To Fly   \n","...            ...      ...      ...         ...           ...   \n","115373     1964010    35114     1188           1  Learn To Fly   \n","115586     1966225    21484     1188           1  Learn To Fly   \n","116883     1988416    74529     1188           2  Learn To Fly   \n","117299     1991996    14416     1188           1  Learn To Fly   \n","117546     1995070     9570     1188           1  Learn To Fly   \n","\n","                              release   artist_name  year  \\\n","676     There Is Nothing Left To Lose  Foo Fighters  1999   \n","1369    There Is Nothing Left To Lose  Foo Fighters  1999   \n","1535    There Is Nothing Left To Lose  Foo Fighters  1999   \n","2171    There Is Nothing Left To Lose  Foo Fighters  1999   \n","3315    There Is Nothing Left To Lose  Foo Fighters  1999   \n","...                               ...           ...   ...   \n","115373  There Is Nothing Left To Lose  Foo Fighters  1999   \n","115586  There Is Nothing Left To Lose  Foo Fighters  1999   \n","116883  There Is Nothing Left To Lose  Foo Fighters  1999   \n","117299  There Is Nothing Left To Lose  Foo Fighters  1999   \n","117546  There Is Nothing Left To Lose  Foo Fighters  1999   \n","\n","                                                     text  \n","676     Learn To Fly There Is Nothing Left To Lose Foo...  \n","1369    Learn To Fly There Is Nothing Left To Lose Foo...  \n","1535    Learn To Fly There Is Nothing Left To Lose Foo...  \n","2171    Learn To Fly There Is Nothing Left To Lose Foo...  \n","3315    Learn To Fly There Is Nothing Left To Lose Foo...  \n","...                                                   ...  \n","115373  Learn To Fly There Is Nothing Left To Lose Foo...  \n","115586  Learn To Fly There Is Nothing Left To Lose Foo...  \n","116883  Learn To Fly There Is Nothing Left To Lose Foo...  \n","117299  Learn To Fly There Is Nothing Left To Lose Foo...  \n","117546  Learn To Fly There Is Nothing Left To Lose Foo...  \n","\n","[222 rows x 9 columns]"],"text/html":["\n","  <div id=\"df-1328d5aa-69b0-4c86-bc07-cccdd31c9be5\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>Unnamed: 0</th>\n","      <th>user_id</th>\n","      <th>song_id</th>\n","      <th>play_count</th>\n","      <th>title</th>\n","      <th>release</th>\n","      <th>artist_name</th>\n","      <th>year</th>\n","      <th>text</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>676</th>\n","      <td>8275</td>\n","      <td>75901</td>\n","      <td>1188</td>\n","      <td>2</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","      <td>Learn To Fly There Is Nothing Left To Lose Foo...</td>\n","    </tr>\n","    <tr>\n","      <th>1369</th>\n","      <td>19706</td>\n","      <td>9097</td>\n","      <td>1188</td>\n","      <td>1</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","      <td>Learn To Fly There Is Nothing Left To Lose Foo...</td>\n","    </tr>\n","    <tr>\n","      <th>1535</th>\n","      <td>20895</td>\n","      <td>19193</td>\n","      <td>1188</td>\n","      <td>1</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","      <td>Learn To Fly There Is Nothing Left To Lose Foo...</td>\n","    </tr>\n","    <tr>\n","      <th>2171</th>\n","      <td>31768</td>\n","      <td>26149</td>\n","      <td>1188</td>\n","      <td>2</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","      <td>Learn To Fly There Is Nothing Left To Lose Foo...</td>\n","    </tr>\n","    <tr>\n","      <th>3315</th>\n","      <td>54773</td>\n","      <td>35737</td>\n","      <td>1188</td>\n","      <td>1</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","      <td>Learn To Fly There Is Nothing Left To Lose Foo...</td>\n","    </tr>\n","    <tr>\n","      <th>...</th>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","    </tr>\n","    <tr>\n","      <th>115373</th>\n","      <td>1964010</td>\n","      <td>35114</td>\n","      <td>1188</td>\n","      <td>1</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","      <td>Learn To Fly There Is Nothing Left To Lose Foo...</td>\n","    </tr>\n","    <tr>\n","      <th>115586</th>\n","      <td>1966225</td>\n","      <td>21484</td>\n","      <td>1188</td>\n","      <td>1</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","      <td>Learn To Fly There Is Nothing Left To Lose Foo...</td>\n","    </tr>\n","    <tr>\n","      <th>116883</th>\n","      <td>1988416</td>\n","      <td>74529</td>\n","      <td>1188</td>\n","      <td>2</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","      <td>Learn To Fly There Is Nothing Left To Lose Foo...</td>\n","    </tr>\n","    <tr>\n","      <th>117299</th>\n","      <td>1991996</td>\n","      <td>14416</td>\n","      <td>1188</td>\n","      <td>1</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","      <td>Learn To Fly There Is Nothing Left To Lose Foo...</td>\n","    </tr>\n","    <tr>\n","      <th>117546</th>\n","      <td>1995070</td>\n","      <td>9570</td>\n","      <td>1188</td>\n","      <td>1</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","      <td>Learn To Fly There Is Nothing Left To Lose Foo...</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>222 rows × 9 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-1328d5aa-69b0-4c86-bc07-cccdd31c9be5')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-1328d5aa-69b0-4c86-bc07-cccdd31c9be5 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-1328d5aa-69b0-4c86-bc07-cccdd31c9be5');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":127}],"source":["df_final.query(\"release == 'There Is Nothing Left To Lose'\")"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"L1eT4_lOLHDr","colab":{"base_uri":"https://localhost:8080/","height":659},"executionInfo":{"status":"ok","timestamp":1671157691957,"user_tz":300,"elapsed":6,"user":{"displayName":"Sean McLean","userId":"07793442105541063961"}},"outputId":"bfc88fc6-75d7-41bf-faa9-3c4ac8b56112"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["        Unnamed: 0  user_id  song_id  play_count          title  \\\n","259           1272    49549     6525           2  The Pretender   \n","517           4486     7320     6525           1  The Pretender   \n","676           8275    75901     1188           2   Learn To Fly   \n","760           8780    57932     6525           2  The Pretender   \n","1369         19706     9097     1188           1   Learn To Fly   \n","...            ...      ...      ...         ...            ...   \n","117299     1991996    14416     1188           1   Learn To Fly   \n","117348     1992111    14416     6525           1  The Pretender   \n","117375     1992181    14416     9249           1       Everlong   \n","117546     1995070     9570     1188           1   Learn To Fly   \n","117703     1995402     9570     9249           1       Everlong   \n","\n","                                           release   artist_name  year  \\\n","259              Echoes_ Silence_ Patience & Grace  Foo Fighters  2007   \n","517              Echoes_ Silence_ Patience & Grace  Foo Fighters  2007   \n","676                  There Is Nothing Left To Lose  Foo Fighters  1999   \n","760              Echoes_ Silence_ Patience & Grace  Foo Fighters  2007   \n","1369                 There Is Nothing Left To Lose  Foo Fighters  1999   \n","...                                            ...           ...   ...   \n","117299               There Is Nothing Left To Lose  Foo Fighters  1999   \n","117348           Echoes_ Silence_ Patience & Grace  Foo Fighters  2007   \n","117375  The Colour And The Shape (Special Edition)  Foo Fighters  1992   \n","117546               There Is Nothing Left To Lose  Foo Fighters  1999   \n","117703  The Colour And The Shape (Special Edition)  Foo Fighters  1992   \n","\n","                                                     text  \n","259     The Pretender Echoes_ Silence_ Patience & Grac...  \n","517     The Pretender Echoes_ Silence_ Patience & Grac...  \n","676     Learn To Fly There Is Nothing Left To Lose Foo...  \n","760     The Pretender Echoes_ Silence_ Patience & Grac...  \n","1369    Learn To Fly There Is Nothing Left To Lose Foo...  \n","...                                                   ...  \n","117299  Learn To Fly There Is Nothing Left To Lose Foo...  \n","117348  The Pretender Echoes_ Silence_ Patience & Grac...  \n","117375  Everlong The Colour And The Shape (Special Edi...  \n","117546  Learn To Fly There Is Nothing Left To Lose Foo...  \n","117703  Everlong The Colour And The Shape (Special Edi...  \n","\n","[832 rows x 9 columns]"],"text/html":["\n","  <div id=\"df-e565b8ad-3736-4dee-992d-a3e790c6b374\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>Unnamed: 0</th>\n","      <th>user_id</th>\n","      <th>song_id</th>\n","      <th>play_count</th>\n","      <th>title</th>\n","      <th>release</th>\n","      <th>artist_name</th>\n","      <th>year</th>\n","      <th>text</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>259</th>\n","      <td>1272</td>\n","      <td>49549</td>\n","      <td>6525</td>\n","      <td>2</td>\n","      <td>The Pretender</td>\n","      <td>Echoes_ Silence_ Patience &amp; Grace</td>\n","      <td>Foo Fighters</td>\n","      <td>2007</td>\n","      <td>The Pretender Echoes_ Silence_ Patience &amp; Grac...</td>\n","    </tr>\n","    <tr>\n","      <th>517</th>\n","      <td>4486</td>\n","      <td>7320</td>\n","      <td>6525</td>\n","      <td>1</td>\n","      <td>The Pretender</td>\n","      <td>Echoes_ Silence_ Patience &amp; Grace</td>\n","      <td>Foo Fighters</td>\n","      <td>2007</td>\n","      <td>The Pretender Echoes_ Silence_ Patience &amp; Grac...</td>\n","    </tr>\n","    <tr>\n","      <th>676</th>\n","      <td>8275</td>\n","      <td>75901</td>\n","      <td>1188</td>\n","      <td>2</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","      <td>Learn To Fly There Is Nothing Left To Lose Foo...</td>\n","    </tr>\n","    <tr>\n","      <th>760</th>\n","      <td>8780</td>\n","      <td>57932</td>\n","      <td>6525</td>\n","      <td>2</td>\n","      <td>The Pretender</td>\n","      <td>Echoes_ Silence_ Patience &amp; Grace</td>\n","      <td>Foo Fighters</td>\n","      <td>2007</td>\n","      <td>The Pretender Echoes_ Silence_ Patience &amp; Grac...</td>\n","    </tr>\n","    <tr>\n","      <th>1369</th>\n","      <td>19706</td>\n","      <td>9097</td>\n","      <td>1188</td>\n","      <td>1</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","      <td>Learn To Fly There Is Nothing Left To Lose Foo...</td>\n","    </tr>\n","    <tr>\n","      <th>...</th>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","    </tr>\n","    <tr>\n","      <th>117299</th>\n","      <td>1991996</td>\n","      <td>14416</td>\n","      <td>1188</td>\n","      <td>1</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","      <td>Learn To Fly There Is Nothing Left To Lose Foo...</td>\n","    </tr>\n","    <tr>\n","      <th>117348</th>\n","      <td>1992111</td>\n","      <td>14416</td>\n","      <td>6525</td>\n","      <td>1</td>\n","      <td>The Pretender</td>\n","      <td>Echoes_ Silence_ Patience &amp; Grace</td>\n","      <td>Foo Fighters</td>\n","      <td>2007</td>\n","      <td>The Pretender Echoes_ Silence_ Patience &amp; Grac...</td>\n","    </tr>\n","    <tr>\n","      <th>117375</th>\n","      <td>1992181</td>\n","      <td>14416</td>\n","      <td>9249</td>\n","      <td>1</td>\n","      <td>Everlong</td>\n","      <td>The Colour And The Shape (Special Edition)</td>\n","      <td>Foo Fighters</td>\n","      <td>1992</td>\n","      <td>Everlong The Colour And The Shape (Special Edi...</td>\n","    </tr>\n","    <tr>\n","      <th>117546</th>\n","      <td>1995070</td>\n","      <td>9570</td>\n","      <td>1188</td>\n","      <td>1</td>\n","      <td>Learn To Fly</td>\n","      <td>There Is Nothing Left To Lose</td>\n","      <td>Foo Fighters</td>\n","      <td>1999</td>\n","      <td>Learn To Fly There Is Nothing Left To Lose Foo...</td>\n","    </tr>\n","    <tr>\n","      <th>117703</th>\n","      <td>1995402</td>\n","      <td>9570</td>\n","      <td>9249</td>\n","      <td>1</td>\n","      <td>Everlong</td>\n","      <td>The Colour And The Shape (Special Edition)</td>\n","      <td>Foo Fighters</td>\n","      <td>1992</td>\n","      <td>Everlong The Colour And The Shape (Special Edi...</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>832 rows × 9 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-e565b8ad-3736-4dee-992d-a3e790c6b374')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-e565b8ad-3736-4dee-992d-a3e790c6b374 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-e565b8ad-3736-4dee-992d-a3e790c6b374');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":128}],"source":["df_final.query(\"artist_name == 'Foo Fighters'\")"]},{"cell_type":"markdown","source":["*   The final two queries shows what users were listening to the song 'Learn To Fly' from the artist'Foo Fighters' on their release 'There Is Nothing Left To Lose'. From both queries there are several instances where there were multiple playcounts for the song 'Learn To Fly' and 'The Pretender' which was one of the top recommended songs, so this could be an indicator that the recommendation system built here is working."],"metadata":{"id":"6RqAXI9H7DSJ"}},{"cell_type":"markdown","metadata":{"id":"OBSVldIBnG-o"},"source":["**Observations and Insights:**\n","\n","*   It looks like there is some similarities in that the first two songs in the recommendation list are songs from the same band and one song has the word 'fly' in it like the song we are looking up recommendations for based off the similarities. That is a pretty solid indication that the text features extraction worked to find similar songs. There are plenty songs in the database that have similar qualities it looks like so this would make for a more in-depth recommendation system for finding similar songs for a user."]}],"metadata":{"colab":{"provenance":[],"authorship_tag":"ABX9TyN8KFurglCMBLJkljI+H8Xm"},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}